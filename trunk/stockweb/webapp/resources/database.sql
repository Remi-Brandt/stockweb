-- MySQL Administrator dump 1.4
--
-- ------------------------------------------------------
-- Server version	5.4.3-beta-community


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;


--
-- Create schema stockweb
--

CREATE DATABASE IF NOT EXISTS stockweb;
USE stockweb;

--
-- Definition of table `chartsetting`
--

DROP TABLE IF EXISTS `chartsetting`;
CREATE TABLE `chartsetting` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `idscript` int(10) unsigned NOT NULL,
  `name` varchar(45) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1;

--
-- Dumping data for table `chartsetting`
--

/*!40000 ALTER TABLE `chartsetting` DISABLE KEYS */;
INSERT INTO `chartsetting` (`id`,`idscript`,`name`) VALUES 
 (7,93,'demo');
/*!40000 ALTER TABLE `chartsetting` ENABLE KEYS */;


--
-- Definition of table `indicator`
--

DROP TABLE IF EXISTS `indicator`;
CREATE TABLE `indicator` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  `descr` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `indicator`
--

/*!40000 ALTER TABLE `indicator` DISABLE KEYS */;
/*!40000 ALTER TABLE `indicator` ENABLE KEYS */;


--
-- Definition of table `scripts`
--

DROP TABLE IF EXISTS `scripts`;
CREATE TABLE `scripts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `script` text NOT NULL,
  `name` varchar(45) NOT NULL,
  `descr` text,
  `param` varchar(255) NOT NULL,
  `settingchart` varchar(255) DEFAULT ' ',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=94 DEFAULT CHARSET=latin1;

--
-- Dumping data for table `scripts`
--

/*!40000 ALTER TABLE `scripts` DISABLE KEYS */;
INSERT INTO `scripts` (`id`,`script`,`name`,`descr`,`param`,`settingchart`) VALUES 
 (17,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n\n/*\n    println(\"tendencia: \" + candles.getTendencia(lastbar, lastbar+3));\n    println(\"begin: \" + lastbar);\n    println(\"end: \" + (lastbar+1));\n    println(\"date: \" + candles.Date(lastbar));\n\n\n    json.put(\"high\", candles.High(lastbar));\n    json.put(\"low\", candles.Low(lastbar));\n    json.put(\"close\", candles.Close(lastbar));\n    json.put(\"open\", candles.Open(lastbar));\n\n//    input.put(\"candles\",\"2\");\n\n    var rs = script.call(\"$getTendenciaAltaBaixa\", lastbar, input);\n//    println(script.get(\"return\",rs));\n    json.put(\"result\",candles.getTendencia(lastbar,lastbar+2));\n    json.put(\"result\",candles.isHangingManORHammer(lastbar));\n    var rs = script.call(\"Bullish Tri-Star\", lastbar, input);\n    var rs = script.call(\"Bearish Identical 3 Crows\", lastbar, input);\n    var rs = script.call(\"Bearish Belt Hold\", lastbar, input);\n    var rs = script.call(\"Bullish Abandoned Baby\", lastbar, input);\n    var rs = script.call(\"Bullish Morning Doji Star\", lastbar, input);\n    var rs = script.call(\"Bearish Evening Doji Star\", lastbar, input);\n    var rs = script.call(\"Bullish Doji Star\", lastbar, input);\n    var rs = script.call(\"Bearish Doji Star\", lastbar, input);\n    var rs = script.call(\"Bearish Hanging Man\", lastbar, input);\n    var rs = script.call(\"Bullish Engulfing\", lastbar, input);\n    var rs = script.call(\"Bearish Engulfing\", lastbar, input);\n    var rs = script.call(\"Bullish Morning Star\", lastbar, input);\n    var rs = script.call(\"Bearish Evening Star\", lastbar, input);\n    var rs = script.call(\"Bullish Harami Cross\", lastbar, input);\n    var rs = script.call(\"Bearish Harami Cross\", lastbar, input);\n    var rs = script.call(\"Bullish Harami\", lastbar, input);\n    var rs = script.call(\"Bearish Harami\", lastbar, input);\n    var rs = script.call(\"Bullish Inverted Hammer\", lastbar, input);\n    var rs = script.call(\"Bullish Hammer\", lastbar, input);\n    var rs = script.call(\"Bearish Dark Cloud Cover\", lastbar, input);\n    var rs = script.call(\"Bearish On/In-Neck & Thrusting Pattern\", lastbar, input);\n    var rs = script.call(\"Bearish On-Neck Pattern\", lastbar, input);\n    var rs = script.call(\"Bullish Piercing Line Approval\", lastbar, input);\n    var rs = script.call(\"Bullish Piercing Line\", lastbar, input);\n    var rs = script.call(\"Bearish In-Neck\", lastbar, input);\n    var rs = script.call(\"Bearish On-Neck\", lastbar, input);\n    var rs = script.call(\"ThreeStartSouth\", lastbar, input);\n//    var rs = script.call(\"Tweezers Tops & Bottoms\", lastbar, input);\n\n    // OK\n    var rs = script.call(\"$IFR\", lastbar, input); //    input.put(\"ncandles\",\"14\");\n    var rs = script.call(\"Shooting Star\", lastbar, input);\n\n*/\n\n//    var rs = script.call(\"Bearish On-Neck\", lastbar, input);\n//    var rs = script.call(\"$MME\", lastbar, input);\n//    var rs = script.call(\"@Setup Pedrina\", lastbar, input);\n/*\n    input.put(\"ncandles\",\"5\");\n    var rs = script.call(\"$FI\", lastbar, input);\n\n    json.put(\"volume\", candles.Volume(lastbar));\n    json.put(\"result\", script.get(\"result\",rs));\n*/\n\n\n\n    //close,TMAp,TMA,TMAm\n    input.put(\"ncandles\",\"2\");\n    var rs = script.call(\"@Bandando\", lastbar, input);\n\n    json.put(\"close\", candles.Close(lastbar));\n    json.put(\"TMAp\", script.get(\"TMAp\",rs));\n    json.put(\"TMA\", script.get(\"TMA\",rs));\n    json.put(\"TMAm\", script.get(\"TMAm\",rs));\n\n\n/*\n    json.put(\"input_long\", script.get(\"input_long\",rs));\n    json.put(\"input_short\", script.get(\"input_short\",rs));\n    json.put(\"stop_gain\", script.get(\"stop_gain\",rs));\n    json.put(\"stop_loss\", script.get(\"stop_loss\",rs));\n    json.put(\"stop_inicial\", script.get(\"stop_inicial\",rs));\n\n//close,input_long,input_short,stop_gain,stop_loss,stop_inicial\n*/\n/*\n    input.put(\"ncandles\", \"5\");\n    var MME_5 = script.get(\"result\", script.call(\"$MME\", lastbar + 1, input));\n    input.put(\"ncandles\", \"10\");\n    var MME_10 = script.get(\"result\", script.call(\"$MME\", lastbar + 1, input));\n    input.put(\"ncandles\", \"21\");\n    var MME_21 = script.get(\"result\", script.call(\"$MME\", lastbar + 1, input));\n\n    input.put(\"ncandles\", \"6\");\n    var HiLo = script.get(\"result\", script.call(\"@HiLo\", lastbar, input));\n\n    json.put(\"HiLo\", HiLo);\n    json.put(\"MME_5\", MME_5);\n    json.put(\"MME_10\", MME_10);\n    json.put(\"MME_21\", MME_21);\n//close,MME_5,MME_10,MME_21,HiLo\n*/\n    return json;\n}\n','script 01','Teste de performance:\n\n* ThreeStartSouth = nao encontrei a açao que possa testar os 3 ultimos candles.\n\n','close,TMAp,TMA,TMAm','#000000,#FE0101,histograma,0,close|#93B0C1,#FE0101,line,0,TMAp|#93B0C1,#93B0C1,line,0,TMA|#FE0101,#FE0101,line,0,TMAm'),
 (23,'function applyScript(candle, json, lastbar, script, input) {\n\n    var SinalCandle1 = false;\n    var SinalCandle2 = false;\n    var TendenciaCandleAlta = false;\n    var TendenciaCandleBaixa = false;\n    var QtdeTendenciaBaixa = 0;\n    var QtdeTendenciaAlta = 0;\n    var result = 0;\n\n    var x = lastbar;\n\n    var SinalCandle1 = (candle.Close(x) > candle.Open(x));\n    var SinalCandle2 = (candle.Close(x + 1) > candle.Open(x + 1));\n\n    // Verificando Tendencia de Baixa dos Candles\n    if (SinalCandle1 && SinalCandle2) {\n        TendenciaCandleAlta = candle.Close(x) > candle.Close(x + 1);\n        TendenciaCandleBaixa = candle.Close(x) < candle.Close(x + 1);\n    } else if ((SinalCandle1) && (SinalCandle2 == false)) {\n        TendenciaCandleAlta = (candle.Close(x) > candle.Open(x + 1)) || (candle.Close(x) > candle.Close(x + 1));\n        TendenciaCandleBaixa = (candle.Close(x) < candle.Open(x + 1)) && (candle.Close(x) < candle.Close(x + 1));\n    } else if ((SinalCandle1 == false) && (SinalCandle2)) {\n        TendenciaCandleAlta = (candle.Open(x) > candle.Close(x + 1)) && (candle.Close(x) > candle.Open(x + 1));\n        TendenciaCandleBaixa = (candle.Open(x) < candle.Close(x + 1)) || (candle.Close(x) < candle.Open(x + 1));\n    } else if ((SinalCandle1 == false) && (SinalCandle2 == false)) {\n        TendenciaCandleAlta = (candle.Open(x) > candle.Open(x + 1)) && (candle.Close(x) > candle.Open(x + 1));\n        TendenciaCandleBaixa = (candle.Open(x) < candle.Open(x + 1)) || (candle.Close(x) < candle.Close(x + 1));\n    }\n\n    if (TendenciaCandleBaixa) {\n        QtdeTendenciaBaixa = QtdeTendenciaBaixa + 1;\n    }\n\n    if (TendenciaCandleAlta) {\n        QtdeTendenciaAlta = QtdeTendenciaAlta + 1;\n    }\n\n    if (QtdeTendenciaBaixa == 0) { // QtdeTendenciaBaixa = 0 significa que a tendencia é de ALTA\n        result = 1;\n    } else if (QtdeTendenciaAlta = 0) { // QtdeTendenciaAlta = 0 significa que a tendencia é de BAIXA\n        result = 0;\n    }\n    json.put(\"return\", result);\n    return json;\n\n}\n','$getTendenciaAltaBaixa','$getTendenciaAltaBaixa(candleposition)','return',''),
 (24,'function applyScript(candle, json, lastbar, script, input) {\n\n    var ncandles = input.get(\"ncandles\");\n    var totClose = 0;\n    for (var x = lastbar; x < (lastbar+ncandles); x++) {\n        totClose  += candle.Close(x);\n    }\n\n    json.put(\"media\", Media);\n\n    return json;\n}\n','$getVolumeMedio','$getVolumeMedio(ncandles)','media,mediamin',''),
 (30,'function applyScript(candles, json, lastbar, script, input) {\n\n    result = 0;\n\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0);\n    var SombraSup1 = candles.getCandleSize(lastbar, 2, 1);\n    var SombraInf1 = candles.getCandleSize(lastbar, 2, 2);\n    var LargCandle1 = CorpoCandle1 + SombraSup1 + SombraInf1;\n\n    var CorpoCandle2 = candles.getCandleSize((lastbar + 1), 1, 0);\n    var SombraSup2 = candles.getCandleSize((lastbar + 1), 2, 1);\n    var SombraInf2 = candles.getCandleSize((lastbar + 1), 2, 2);\n    var LargCandle2 = CorpoCandle2 + SombraSup2 + SombraInf2;\n\n    var CorpoCandle3 = candles.getCandleSize((lastbar + 2), 1, 0);\n    var SombraSup3 = candles.getCandleSize((lastbar + 2), 2, 1);\n    var SombraInf3 = candles.getCandleSize((lastbar + 2), 2, 2);\n    var LargCandle3 = CorpoCandle3 + SombraSup3 + SombraInf3;\n    //=================================================================================\n    // 3 corvos idênticos (Bearish Identical 3 Crows)\n    var x = 1.5;\n\n    DojiCandle1 = candles.Doji(lastbar);\n    DojiCandle2 = candles.Doji(lastbar + 1);\n    DojiCandle3 = candles.Doji(lastbar + 1);\n\n    TendenciaUltimosCandles = candles.getTendencia(lastbar + 2, lastbar + 3);\n\n    TerceiroCandleBaixa = DojiCandle3 && ((candles.Open(lastbar + 2) < candles.Close(3)) || (candles.Open(lastbar + 2) < candles.Open(3))) && ((candles.Close(lastbar + 2) < candles.Close(3)) || (candles.Close(lastbar + 2) < candles.Open(3))) && ((LargCandle1 < LargCandle2 * x) && (LargCandle1 < LargCandle3 * x));\n\n    SegundoCandleBaixa = DojiCandle2 && ((candles.Open(lastbar + 1) < candles.Close(lastbar + 2)) || (candles.Open(lastbar + 1) < candles.Open(lastbar + 2))) && ((candles.Close(lastbar + 1) < candles.Close(lastbar + 2)) || (candles.Close(lastbar + 1) < candles.Open(lastbar + 2))) && ((LargCandle2 < LargCandle1 * x) && (LargCandle2 < LargCandle3 * x));\n\n    PrimeiroCandleBaixa = DojiCandle1 && ((candles.Open(lastbar) > candles.Close(lastbar + 2)) || (candles.Open(lastbar) > candles.Open(lastbar + 2))) && ((candles.Close(lastbar) > candles.Close(lastbar + 2)) || (candles.Close(lastbar) > candles.Open(lastbar + 2))) && ((LargCandle3 < LargCandle1 * x) && (LargCandle3 < LargCandle2 * x));\n\n    //perc60Candle = (((Open[1] - Close[1]) / 100) * 50) //Retorna o valor do preço que representa 10%\n    //perc40Candle = (((Open[1] - Close[1]) / 100) * 40) //Retorna o valor do preço que representa 10%\n    TresEstrelas = TerceiroCandleBaixa && SegundoCandleBaixa && PrimeiroCandleBaixa && (TendenciaUltimosCandles = 1);\n\n    if (TresEstrelas) {\n        result = -19;\n    }\n\n    json.put(\"result\", result);\n    return json;\n}\n','Bullish Tri-Star','3 estrelas (Bullish Tri-Star)\n--------------------------------\nDescrição : Todos os 3 dias são dojis.\nSegundo dia abre com gap de baixa abaixo do primeiro dia e do terceiro\n\nPsicologia\n\nPadrão raro, então esteja sempre atento com essa formação. Este padrão não é válido para ações com baixo volume. A grande indecisão criada por esses três dojis deve ser ignorada por traders. Este nível de indecisão emite fortes sugestões que a tendência está para mudar. E é sinal de reversão para alta.\n\nTipo : BULLISH/ALTA REVERSÃO','result','#000000,#000000,Histograma,0'),
 (31,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0);\n    var SombraSup1 = candles.getCandleSize(lastbar, 2, 1);\n    var SombraInf1 = candles.getCandleSize(lastbar, 2, 2);\n\n    var CorpoCandle2 = candles.getCandleSize(lastbar + 1, 1, 0);\n    var SombraSup2 = candles.getCandleSize(lastbar + 1, 2, 1);\n    var SombraInf2 = candles.getCandleSize(lastbar + 1, 2, 2);\n\n    var CorpoCandle3 = candles.getCandleSize(lastbar + 2, 1, 0);\n    var SombraSup3 = candles.getCandleSize(lastbar + 2, 2, 1);\n    var SombraInf3 = candles.getCandleSize(lastbar + 2, 2, 2);\n\n    var CorpoCandle4 = candles.getCandleSize(lastbar + 3, 1, 0);\n    var SombraSup4 = candles.getCandleSize(lastbar + 3, 2, 1);\n    var SombraInf4 = candles.getCandleSize(lastbar + 3, 2, 2);\n\n    var CorpoCandle5 = candles.getCandleSize(lastbar + 4, 1, 0);\n    var SombraSup5 = candles.getCandleSize(lastbar + 4, 2, 1);\n    var SombraInf5 = candles.getCandleSize(lastbar + 4, 2, 2);\n\n    var LarguraCandle5 = (CorpoCandle5 + SombraSup5 + SombraInf5);\n    var LarguraCandle4 = (CorpoCandle4 + SombraSup4 + SombraInf4);\n    var LarguraCandle3 = (CorpoCandle3 + SombraSup3 + SombraInf3);\n    var LarguraCandle2 = (CorpoCandle2 + SombraSup2 + SombraInf2);\n    var LarguraCandle1 = (CorpoCandle1 + SombraSup1 + SombraInf1);\n\n    var TendenciaUltimosCandles = candles.getTendencia(5, 6);\n\n    var QuintoCandleBaixa = (candles.Open(lastbar + 4) > candles.Close(lastbar + 4)) && (CorpoCandle5 > (SombraSup5 + SombraInf5));\n\n    var QuartoCandle = ((candles.Open(lastbar + 3) > candles.Close(lastbar + 4)) || (candles.Open(lastbar + 3) > candles.Close(lastbar))) && (CorpoCandle4 > (SombraSup4 + SombraInf4)) && (LarguraCandle4 * 2 < LarguraCandle5);\n\n    var TerceiroCandle = ((candles.Open(lastbar + 2) > candles.Close(lastbar + 4)) || (candles.Open(lastbar + 2) > candles.Close(lastbar))) && (CorpoCandle3 > (SombraSup3 + SombraInf3)) && (LarguraCandle3 * 2 < LarguraCandle5);\n\n    var SegundoCandle = ((candles.Open(lastbar + 1) > candles.Close(lastbar + 4)) || (candles.Open(lastbar + 1) > candles.Close(lastbar))) && (CorpoCandle2 > (SombraSup2 + SombraInf2)) && (LarguraCandle2 * 2 < LarguraCandle5);\n\n    var PrimeiroCandleBaixa = (candles.Open(lastbar) > candles.Close(lastbar)) && (CorpoCandle1 > (SombraSup1 + SombraInf1)) && (candles.Close(lastbar) < candles.Low(lastbar + 4)) && ((LarguraCandle1 > LarguraCandle2) && (LarguraCandle1 > LarguraCandle3) && (LarguraCandle1 > LarguraCandle4));\n\n    var TresMetodosQueda = (TendenciaUltimosCandles == 0) && QuintoCandleBaixa && QuartoCandle && TerceiroCandle && SegundoCandle && PrimeiroCandleBaixa;\n\n    if (TresMetodosQueda) {\n        result = 19;\n    }\n\n    json.put(\"result\", result);\n    return json;\n}\n','Bearish 3 methods','','result',''),
 (32,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    //=================================================================================\n    // 2 corvos (Bearish 2 Crows)\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0);\n    var SombraSup1 = candles.getCandleSize(lastbar, 2, 1);\n    var SombraInf1 = candles.getCandleSize(lastbar, 2, 2);\n\n    var CorpoCandle3 = candles.getCandleSize(lastbar+2, 1, 0);\n    var SombraSup3 = candles.getCandleSize(lastbar+2, 2, 1);\n    var SombraInf3 = candles.getCandleSize(lastbar+2, 2, 2);\n    var TendenciaUltimosCandles = candles.getTendencia(lastbar+2, lastbar+4);\n\n    var TerceiroCandleAlta = (candles.Open(lastbar + 2) < candles.Close(lastbar + 2)) && (CorpoCandle3 > (SombraSup3 + SombraInf3));\n\n    var SegundoCandleBaixa = ((candles.Open(lastbar + 1) > candles.Close(lastbar + 2)) && (candles.Close(lastbar + 1) > candles.Close(lastbar + 2))) && (candles.Open(lastbar+1) != candles.Close(lastbar+1)) && (candles.Close(lastbar + 1) < candles.Open(lastbar+1)) && (candles.High(lastbar + 1) > candles.High(lastbar + 2)) && (candles.Low(lastbar + 1) > candles.High(lastbar+2));\n\n    //perc60Candle = (((Open[1] - Close[1]) / 100) * 50) //Retorna o valor do preço que representa 10%\n    //perc40Candle = (((Open[1] - Close[1]) / 100) * 40) //Retorna o valor do preço que representa 10%\n\n    var PrimeiroCandleBaixa = (candles.Open(lastbar) > candles.Close(lastbar)) && (candles.Open(lastbar) <= candles.Open(lastbar + 1)) && (candles.Open(lastbar) > candles.Close(lastbar + 1)) && (CorpoCandle1 > (SombraSup1 + SombraInf1));\n\n    var DoisCorvos = TerceiroCandleAlta && SegundoCandleBaixa && PrimeiroCandleBaixa && (TendenciaUltimosCandles == 1);\n\n    if (DoisCorvos) {\n        result = -18;\n    }\n    json.put(\"result\", result);\n    return json;\n}','Bearish Two Crows','Bearish 2 Crows (2 corvos de baixa) \n\nDescrição:\nNo primeiro dia forma-se um longo candle branco continuando a tendência de alta. No segundo dia ocorre um gap com um candle de baixa. No terceiro dia ocorre um candle de baixa engolfando o candle anterior, fechando acima do fechamento do primeiro dia.\n\nInterpretação:\nApós formado o gap, o segundo candle mostra que o mercado perdeu um pouco de força. O terceiro candle que envolve o segundo apresenta um sinal de mais perda de força do movimento, significando que o mercado não segurará mais essa posição, pronto para a formação de um topo e uma possível reversão. ','result',''),
 (33,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// 3 corvos idênticos (Bearish Identical 3 Crows)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\nvar SombraSup1 = candles.getCandleSize(lastbar ,2 ,1);\nvar SombraInf1 = candles.getCandleSize(lastbar ,2 ,2);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar CorpoCandle3 = candles.getCandleSize(lastbar+2 ,1 ,0);\nvar SombraSup3 = candles.getCandleSize(lastbar+2 ,2 ,1);\nvar SombraInf3 = candles.getCandleSize(lastbar+2 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+2,4);\n\nvar TerceiroCandleBaixa = (candles.Open(lastbar+2) > candles.Close(lastbar+2)) && ( CorpoCandle3 > (SombraSup3+SombraInf3) );\n\nvar SegundoCandleBaixa = (candles.Open(lastbar+1) > candles.Close(lastbar+1)) && ( CorpoCandle2 > (SombraSup2+SombraInf2) ) && (candles.Open(lastbar+1) < candles.Close(lastbar+2));\n\nvar PrimeiroCandleBaixa = (candles.Open(lastbar) > candles.Close(lastbar)) && ( CorpoCandle1 > (SombraSup1+SombraInf1) )  && (candles.Open(lastbar) < candles.Close(lastbar+1));\n\n//perc60Candle = (((candles.Open(lastbar+1) - candles.Close(lastbar+1)) / 100) * 50) //Retorna o valor do preço que representa 10%\n//perc40Candle = (((candles.Open(lastbar+1) - candles.Close(lastbar+1)) / 100) * 40) //Retorna o valor do preço que representa 10%\n\nvar TreCorvosIdenticos = TerceiroCandleBaixa && SegundoCandleBaixa && PrimeiroCandleBaixa &&  (TendenciaUltimosCandles==1);\n\nif (TreCorvosIdenticos && (candles.Open(lastbar+2) > candles.Close(lastbar+3)) && (candles.Open(lastbar+2) > candles.Open(lastbar+3))) {\n	result =-18;\n}else if(TreCorvosIdenticos) {\n	result=18;\n}\n\njson.put(\"result\",result);\nreturn json;\n}\n','Bearish Identical 3 Crows','3 corvos idênticos (Bearish Identical 3 Crows)\n\nDescrição : Todos os 3 dias são dojis.\nSegundo dia abre com gap de baixa abaixo do primeiro dia e do terceiro\n\nPsicologia\n\nPadrão raro, então esteja sempre atento com essa formação. Este padrão não é válido para ações com baixo volume. A grande indecisão criada por esses três dojis deve ser ignorada por traders. Este nível de indecisão emite fortes sugestões que a tendência está para mudar.\n\nTipo : BEARISH/BAIXA REVERSÃO','result',''),
 (34,'function applyScript(candles, json, lastbar, script, input) {\n    //CANDLE - Bearish Belt Hold\n    var result = 0;\n    // ===========================================================================\n    //  Bearish Belt Hold\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0);\n    var SombraSup1 = candles.getCandleSize(lastbar, 2, 1);\n    var SombraInf1 = candles.getCandleSize(lastbar, 2, 2);\n\n    var CorpoCandle2 = candles.getCandleSize(lastbar + 1, 1, 0);\n    var CorpoCandle3 = candles.getCandleSize(lastbar + 2, 1, 0);\n    var CorpoCandle4 = candles.getCandleSize(lastbar + 3, 1, 0);\n    //CorpoCandle5 = candles.getCandleSize(lastbar+4 ,1 ,0);\n    var TendenciaCandles = candles.getTendencia(lastbar + 1, 3);\n    var range20percCandle2 = ((Math.abs(candles.Open(lastbar + 1) - candles.Close(lastbar + 1)) / 100) * 20);\n    var range10percCandle2 = ((Math.abs(candles.Open(lastbar + 1) - candles.Close(lastbar + 1)) / 100) * 10);\n\n    var LarguraCandle = (CorpoCandle1 > CorpoCandle2 * 1.05) && (CorpoCandle1 > CorpoCandle3 * 1.05) && (CorpoCandle1 > CorpoCandle4 * 1.05) && (SombraInf1 > SombraSup1);\n\n    var PrimeiroCandleBaixa = (candles.Open(lastbar) > candles.High(lastbar + 1)) && (CorpoCandle1 > (SombraSup1 + SombraInf1)) && (candles.Close(lastbar) < candles.Low(lastbar) + range20percCandle2) && (((candles.Close(lastbar) > candles.Open(lastbar + 1)) && (candles.Close(lastbar) > candles.Open(lastbar + 1) + range10percCandle2) && (candles.Close(lastbar + 1) > candles.Open(lastbar + 1))) || ((candles.Close(lastbar) > candles.Close(lastbar + 1)) && (candles.Close(lastbar) > candles.Close(lastbar + 1) + range10percCandle2) && (candles.Close(lastbar + 1) < candles.Open(lastbar + 1)))) && (candles.Close(lastbar) < candles.High(lastbar + 1));\n\n    var BearishBeltHold = PrimeiroCandleBaixa && LarguraCandle && (TendenciaCandles == 1);\n\n    if (BearishBeltHold) {\n        result = 1;\n    }\n\n    json.put(\"result\", result);\n    return json;\n}\n','Bearish Belt Hold','Bearish Belt Hold\n\nhttp://thepatternsite.com/BeltHoldBear.html','result',''),
 (35,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n// ================================================================================\n// Bebê abandonado de alta (Bullish Abandoned Baby)\nvar DojiCandle2 = candles.Doji(lastbar+1);\n\nvar CorpoCandle3 = candles.getCandleSize(lastbar+2 ,1 ,0);\nvar SombraSup3 = candles.getCandleSize(lastbar+2 ,2 ,1);\nvar SombraInf3 = candles.getCandleSize(lastbar+2 ,2 ,2);\n\nvar TendenciaCandles = candles.getTendencia(lastbar+2 ,4);\n\nvar TerceiroCandle = (candles.Open(lastbar+2) > candles.Close(lastbar+2)) && (CorpoCandle3 > (SombraSup3+SombraInf3));\nvar SegundoCandle = DojiCandle2 && (candles.High(lastbar+1) < candles.Low(lastbar+2)) && (candles.High(lastbar+1) < candles.Low(lastbar));\nvar PrimeiroCandle = (candles.Close(lastbar) > candles.Open(lastbar));\n\nvar BebeAbandonadoAlta = (TendenciaCandles==0) && PrimeiroCandle && SegundoCandle && TerceiroCandle;\n\nif(BebeAbandonadoAlta) {\n	result = 20;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n\n','Bullish Abandoned Baby','Bebê abandonado de alta (Bullish Abandoned Baby)\n\nDescrição : Primeiro dia os vendedores dominam.\nSegundo dia é um doji que abre em gap de baixa abaixo do preço de abertura do dia anterior.\nO terceiro dia é completamente dominado pelos compradores que abre com gap de alta.\n\nPsicologia\n\nO gap de baixa no segundo dia encoraja os vendedores, no entando o preço fecha no mesmo valor de abertura do segundo dia. Com isso gera-se um sinal temporário de lucro para os vendidos, no entando no terceiro dia revela-se o cenário sobre a indecisão do segundo dia. Movimentos fortes de alta para os próximos dias.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (36,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n//Doji Estrela da manhã (Bullish Morning Doji Star)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\n\nvar CorpoCandle3 = candles.getCandleSize(lastbar+2 ,1 ,0);\nvar SombraSup3 = candles.getCandleSize(lastbar+2 ,2 ,1);\nvar SombraInf3 = candles.getCandleSize(lastbar+2 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+2,3);\n\nvar TerceiroCandleBaixa = (candles.Close(lastbar+2) < candles.Open(lastbar+2)) && (CorpoCandle3 > (SombraSup3+SombraInf3));\n\nvar CandleDoji = candles.Doji(lastbar+1);\n\nvar SegundoCandleGAP = CandleDoji && ((candles.Open(lastbar+1) < candles.Close(lastbar+2)) && (candles.Close(lastbar+1) < candles.Close(lastbar+2))) && ((candles.Open(lastbar+1) < candles.Open(lastbar)) && (candles.Close(lastbar+1) < candles.Open(lastbar)));\n\nvar PrimeiroCandleAlta = (candles.Close(lastbar) >= candles.Close(lastbar+2)) && (candles.Open(lastbar) < candles.Close(lastbar+2)) && (CorpoCandle1 > CorpoCandle2);\n\nvar DojiEstrelaDaManha = TerceiroCandleBaixa && SegundoCandleGAP && PrimeiroCandleAlta && (TendenciaUltimosCandles == 0);\n\nif(DojiEstrelaDaManha) {\n	result = 8;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n\n','Bullish Morning Doji Star','Doji Estrela da manhã (Bullish Morning Doji Star)\n\nDescrição : Primeiro dia com força vendedora dominando. Segundo dia é uma doji que abre em gap de baixa abaixo do preço de fechamento do dia anterior. Terceiro dia é um candle de alta.\n\nPsicologia\n\nA tendência de alta criada pela doji no segundo dia é confirmada no terceiro dia. Se a penetração do terceiro candle for maior do que 50% do primeiro candle, então esta formação tem uma maior chance de ter sucesso para o trader.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (37,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    //=================================================================================\n    // Doji Estrela da noite (Bearish Evening Doji Star)\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0);\n\n    var CorpoCandle2 = candles.getCandleSize(lastbar + 1, 1, 0);\n\n    var CorpoCandle3 = candles.getCandleSize(lastbar + 2, 1, 0);\n    var SombraSup3 = candles.getCandleSize(lastbar + 2, 2, 1);\n    var SombraInf3 = candles.getCandleSize(lastbar + 2, 2, 2);\n\n    var TendenciaUltimosCandles = candles.getTendencia(lastbar + 2, 3);\n\n    var TerceiroCandleAlta = (candles.Close(lastbar + 2) > candles.Open(lastbar + 2)) && (CorpoCandle3 > (SombraSup3 + SombraInf3));\n\n    var CandleDoji = candles.Doji(lastbar + 1);\n\n    var SegundoCandleGAP = CandleDoji && ((candles.Open(lastbar + 1) > candles.Close(lastbar + 2)) && (candles.Close(lastbar + 1) > candles.Close(lastbar + 2))) && ((candles.Open(lastbar + 1) > candles.Open(lastbar)) && (candles.Close(lastbar + 1) > candles.Open(lastbar))) && (candles.Low(lastbar + 1) > candles.High(lastbar + 2));\n\n    var PrimeiroCandleBaixa = (candles.Open(lastbar) > candles.Close(lastbar)) && (candles.Open(lastbar) >= candles.Open(lastbar + 2)) && (candles.Open(lastbar) > candles.Close(lastbar + 2)) && (CorpoCandle1 > CorpoCandle2);\n\n    var DojiEstrelaDaNoite = TerceiroCandleAlta && SegundoCandleGAP && PrimeiroCandleBaixa && (TendenciaUltimosCandles == 1);\n\n    if (DojiEstrelaDaNoite) {\n        result = -8;\n    }\n\n    if (DojiEstrelaDaNoite && ((candles.Close(lastbar + 2) < candles.Open(lastbar)) && (candles.Close(lastbar + 2) > candles.Close(lastbar)))) {\n        result = -8.5;\n    }\n\n    json.put(\"result\", result);\n    return json;\n\n}\n','Bearish Evening Doji Star','Doji Estrela da noite (Bearish Evening Doji Star)\n\nDescrição : Primeiro dia com força compradora dominando. Segundo dia é uma doji que abre em gap de alta acima do preço de fechamento do dia anterior. Terceiro dia é um candle de baixa.\n\nPsicologia\n\nA tendência de baixa gerada pela doji no segundo dia é confirmada no terceiro dia. Se a penetração do terceiro candle for maior do que 50% do primeiro candle, então esta formação tem uma maior chance de ter sucesso para o trader.\n\nTipo : BEARISH/BAIXA REVERSÃO','result',''),
 (38,'//C&&LE - Doji estrela de alta\n\nfunction applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Doji estrela de alta (Bullish Doji Star)\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+1,3);\n\nvar SegundoCandleBaixa = (candles.Open(lastbar+1) > candles.Close(lastbar+1)) && (CorpoCandle2 > CorpoCandle1) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nvar CandleDoji = candles.Doji(lastbar);\n\nvar PrimeiroCandleGAP = CandleDoji && ((candles.Open(lastbar) < candles.Open(lastbar+1)) && (candles.Open(lastbar) < candles.Close(lastbar+1))) && (candles.High(lastbar) < candles.Low(lastbar+1));\n\nvar DojiEstrelaAlta = SegundoCandleBaixa && PrimeiroCandleGAP && (TendenciaUltimosCandles==0);\n\nif (DojiEstrelaAlta) {\n  result = 7;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n','Bullish Doji Star','Doji estrela de alta (Bullish Doji Star)\n\nDescrição : Primeiro dia completamente dominado pela força vendedora.\nSegundo dia é um doji que abre em gap de baixa abaixo da mínima do dia primeiro dia.\nAs sombras da doji não podem ser longas.\n\nPsicologia\n\nA tendência de baixa está com força total no primeiro dia. Toda a confiança dos vendidos é destruida a partir do momento que o segundo dia abre em gap de baixa e fecha no mesmo ponto na qual abriu, ou próximo a ele. Vendedores irão fechar suas posições rapidamente caso no próximo dia invadam a máxima do doji.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (39,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Doji estrela (Bearish Doji Star)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+1,3);\n\nvar SegundoCandleAlta = (candles.Open(lastbar) > candles.Close(lastbar)) && (CorpoCandle2 > CorpoCandle1) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nvar CandleDoji = candles.Doji(lastbar);\n\nvar PrimeiroCandleGAP = CandleDoji && ( ((candles.Open(lastbar+1) > candles.Close(lastbar+1)) && (candles.Open(lastbar) > candles.Open(lastbar+1))) || ( (candles.Open(lastbar+1) < candles.Close(lastbar+1)) && (candles.Open(lastbar) > candles.Close(lastbar+1)) )) && (candles.Low(lastbar) > candles.Low(lastbar+1));\n\nvar DojiEstrela = SegundoCandleAlta && PrimeiroCandleGAP && (TendenciaUltimosCandles==1);\n\nif(DojiEstrela) {\n	result = -7;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n','Bearish Doji Star','Doji estrela de queda (Bearish Doji Star)\n\nDescrição : Primeiro dia completamente dominado pela força compradora.\nSegundo dia é um doji que abre em gap de alta acima da máxima do dia primeiro dia.\nAs sombras da doji não podem ser longas.\n\nPsicologia\n\nA tendência de alta está com força total no primeiro dia. Toda a confiança dos comprados é destruida a partir do momento que o segundo dia abre em gap de alta e fecha no mesmo ponto na qual abriu, ou próximo a ele. Compradores irão fechar suas posições rapidamente caso no próximo dia invadam a mínima do doji.\n\nTipo : BEARISH/BAIXA REVERSÃO','result',''),
 (40,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    //=================================================================================\n    // O enforcado (Bearish Hanging Man)\n    var CorpoCandle2 = candles.getCandleSize(lastbar + 1, 1, 0);\n    var SombraSup2 = candles.getCandleSize(lastbar + 1, 2, 1);\n    var SombraInf2 = candles.getCandleSize(lastbar + 1, 2, 2);\n\n    var LarguraCandle2 = candles.getCandleSize(lastbar + 1, 3, 0);\n\n    var percLargCandle2 = 100 - Math.abs(((CorpoCandle2 / LarguraCandle2) * 100) - 100);\n\n    var CandlesTendencia = candles.getTendencia(lastbar + 1, 3);\n\n    Enforcado = (candles.Open(lastbar + 1) != candles.Close(lastbar + 1)) && ((percLargCandle2 > 10) && (percLargCandle2 <= 30)) && ((SombraInf2 > CorpoCandle2 * 2) && ((SombraSup2 / (SombraInf2 + CorpoCandle2)) < 0.10)) && (candles.Close(lastbar) < candles.Close(lastbar + 1)) && (CandlesTendencia == 1); // Tendencia de Alta\n    if (Enforcado) {\n        result = 3;\n    }\n\n    json.put(\"result\", result);\n    return json;\n\n}\n','Bearish Hanging Man','O enforcado (Bearish Hanging Man)\n\nDescrição : Candle formado por um candle de corpo pequeno e longa sombra, a cor do candle não importa.\nLonga sombra formada, duas vezes maior que o corpo do candle, com nenhuma ou mínima sombra superior.\nA tendência obrigatoriamente deve ser de alta.\n\nPsicologia\n\nComo qualquer candle único, confirmação é obrigatória para o candle funcionar. Esta formação apresenta uma grande força vendedora fazendo mínimas cada vez mais fortes no candle presente porém o mesmo reverte e fecha perto da abertura do dia. Esse fato tira a certeza dos comprados que estão sobre controle. Para a confirmação do candle, seria bom o candle seguinte abrir abaixo do que a mínima do dia anterior e o fechamento apresentando força total dos vendidos.\n\nTipo : BEARISH/BAIXA REVERSÃO','result',''),
 (41,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n// ================================================================================\n//  Engolfo de alta (Bullish Engulfing)\n// ================================================================================\n//  Engolfo de alta\nCorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\n\nCorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\n\nvar myDoji = candles.Doji(lastbar+1);\nvar TendenciaCandlesMinima = candles.getTendencia(lastbar+1 ,3);\nvar TendenciaCandlesMedia = candles.getTendencia(lastbar+1 ,5);\nvar TendenciaCandlesForte = candles.getTendencia(lastbar+1 ,7);\n\nvar AlturaCandle = (CorpoCandle1 > CorpoCandle2);\n//EngulfingFull = 0\nvar SegundoCandle = ( (candles.Close(lastbar+1) < candles.Open(lastbar+1)) || (myDoji == 1) ) && ((candles.Open(lastbar+1) < candles.Close) && (candles.Open(lastbar+1) > candles.Open(lastbar))) && ((candles.Close(lastbar+1) > candles.Open(lastbar)) && (candles.Close(lastbar+1) < candles.Close(lastbar)));\nvar PrimeiroCandle = (candles.Open(lastbar) < candles.Close(lastbar+1)) && (candles.Close(lastbar) > candles.Open(lastbar+1)) && AlturaCandle;\n\nif(SegundoCandle && PrimeiroCandle) {\n	result = 2;\n	if(TendenciaCandlesMinima==0) {\n		result = 2.10;\n	}\n	if(TendenciaCandlesMedia==0) {\n		result = 2.30;\n	}\n	if(TendenciaCandlesForte==0) {\n		result = 2.50;\n	}\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n','Bullish Engulfing','Engolfo de alta (Bullish Engulfing)\n\nDescrição : A cor do candle do primeiro dia reflete a tendência de baixa, no entando pode ser uma doji.\nNo segundo dia um enorme candle engolfa o primeiro.\n\nPsicologia\n\nO padrão é mais forte caso não ocorra muito volume no primeiro dia.\nSegundo dia abre em gap de baixa, abaixo do fechamento do primeiro dia,no entanto rapidamente fecha acima da abertura do dia anterior. Com isto os vendedores trazem em questão a real tendência de baixa dos preços e os alertam para uma forte reversão da tendência pois,caso confirmado, os compradores irão dominar nos próximos dias.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (42,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    //  Engolfo de alta\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0);\n    var CorpoCandle2 = candles.getCandleSize(lastbar + 1, 1, 0);\n\n    var myDoji = candles.Doji(lastbar + 1);\n    var TendenciaCandlesMinima = candles.getTendencia(lastbar + 1, 1);\n    var TendenciaCandlesMedia = candles.getTendencia(lastbar + 1, 4);\n    var TendenciaCandlesForte = candles.getTendencia(lastbar + 1, 7);\n\n    var AlturaCandle = (CorpoCandle1 > CorpoCandle2);\n    //EngulfingFull = 0\n    var SegundoCandle = ((candles.Close(lastbar + 1) > candles.Open(lastbar + 1)) || (myDoji == 1));\n\n    var PrimeiroCandle = ((candles.Close(lastbar + 1) < candles.Open(lastbar)) && (candles.Close(lastbar + 1) > candles.Close(lastbar))) && ((candles.Open(lastbar + 1) < candles.Open(lastbar)) && (candles.Open(lastbar + 1) > candles.Close(lastbar))) && AlturaCandle;\n\n    if (SegundoCandle && PrimeiroCandle) {\n        // result = -2\n        if (TendenciaCandlesMinima == 1) {\n            result = -2.10;\n        }\n        if (TendenciaCandlesMedia == 1) {\n            result = -2.30;\n        }\n        if (TendenciaCandlesForte == 1) {\n            result = -2.50;\n        }\n\n    }\n\n    json.put(\"result\", result);\n    return json;\n\n}\n','Bearish Engulfing','Engolfo de baixa (Bearish Engulfing)\n\nDescrição : A cor do candle do primeiro dia reflete a tendência de baixa, no entando pode ser uma doji.\nNo segundo dia um enorme candle engolfa o primeiro.\n\nPsicologia\n\nO padrão é mais forte caso não ocorra muito volume no primeiro dia.\nSegundo dia abre em gap de baixa, abaixo do fechamento do primeiro dia,no entanto rapidamente fecha acima da abertura do dia anterior. Com isto os vendedores trazem em questão a real tendência de baixa dos preços e os alertam para uma forte reversão da tendência pois,caso confirmado, os compradores irão dominar nos próximos dias.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (43,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Estrela da manha (Bearish Evening Star)\n\n// candles.getCandleSize(Numero Candle, Corpo(1) / Sombra(2), Alta(1) / Baixa(2), Sombra Superior ou Inferior (1,2) ]\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nSombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nSombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar CorpoCandle3 = candles.getCandleSize(lastbar+2 ,1 ,0);\nvar SombraSup3 = candles.getCandleSize(lastbar+2 ,2 ,1);\nvar SombraInf3 = candles.getCandleSize(lastbar+2 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+2,lastbar+3);\n\nvar TerceiroCandleBaixa = (candles.Close(lastbar+2) < candles.Open(lastbar+2)) && (CorpoCandle3 > (SombraSup3+SombraInf3));\n\nvar SegundoCandleGAP = ((CorpoCandle2*2) < CorpoCandle3) && ((candles.Open(lastbar+1) < candles.Close(lastbar+2)) && (candles.Close(lastbar+1) < candles.Close(lastbar+2))) &&  ((candles.Open(lastbar+1) < candles.Open(lastbar)) && (candles.Close(lastbar+1) < candles.Open(lastbar))) && (SombraSup2 > SombraInf2);\n\nvar PrimeiroCandleAlta = (candles.Close(lastbar) >= candles.Open(lastbar+2)) && (candles.Open < candles.Close(lastbar+2)) && (CorpoCandle1 > CorpoCandle2); \n\nvar EstrelaDaManha = TerceiroCandleBaixa && SegundoCandleGAP && PrimeiroCandleAlta && (TendenciaUltimosCandles==0);\n\nif (EstrelaDaManha) {\n	result = 5;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n','Bullish Morning Star','Estrela da manhã (Bullish Morning Star)\n\nDescrição : Primeiro dia com os preços em forte baixa.\nSegundo dia abre em gap de baixa abaixo do preço de fechamento do dia anterior.\nTerceiro dia é completamente dominado pelos compradores.\n\nPsicologia\n\nApesar da nova mínima do segundo dia e do seu gap de baixa, note a pouca variação dos preços no dia. A Indecisão da tendência de baixa é confirmada com o preço de fechamento do terceiro dia. Revertendo a tendência de baixa sendo assim compradores entram no domínio da nova tendência esperando-se novas altas para os próximo dias.\n\nTipo :      BULLISH/ALTA REVERSÃO','result',''),
 (44,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Doji Estrela da noite (Bearish Evening Doji Star)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\nvar SombraSup1 = candles.getCandleSize(lastbar ,2 ,1);\nvar SombraInf1 = candles.getCandleSize(lastbar ,2 ,2);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\n\nvar CorpoCandle3 = candles.getCandleSize(lastbar+2 ,1 ,0);\nvar SombraSup3 = candles.getCandleSize(lastbar+2 ,2 ,1);\nvar SombraInf3 = candles.getCandleSize(lastbar+2 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+2,3);\n\nvar TerceiroCandleAlta = (candles.Close(lastbar+2) > candles.Open(lastbar+2)) && (CorpoCandle3 > (SombraSup3+SombraInf3));\n\nvar SegundoCandleGAP =((candles.Open(lastbar+1) > candles.Close(lastbar+2)) && (candles.Close(lastbar+1) > candles.Close(lastbar+2))) &&  ((candles.Open(lastbar+1) > candles.Open(lastbar)) && (candles.Close(lastbar+1) > candles.Open(lastbar))) && (candles.Low(lastbar+1) > candles.High(lastbar+2)) && (CorpoCandle2 < CorpoCandle3) && (CorpoCandle2 < CorpoCandle1);\n\nvar PrimeiroCandleBaixa = (candles.Open(lastbar) > candles.Close(lastbar)) && (candles.Open(lastbar) >= candles.Open(lastbar+2)) && (candles.Open(lastbar) > candles.Close(lastbar+2)) && (CorpoCandle1 > SombraSup1+SombraInf1);\n\nvar EstrelaDaNoite = TerceiroCandleAlta && SegundoCandleGAP && PrimeiroCandleBaixa;\n\nif (EstrelaDaNoite) {\n	result = -5;\nif (TendenciaUltimosCandles==1) {\n	result = -5.30;\n}\n\nif ((candles.Close(lastbar+2) < candles.Open(lastbar) ) && (candles.Close(lastbar+2) > candles.Close(lastbar))) {\nresult = -5.5;\n}\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n','Bearish Evening Star','No primeiro dia forma-se um candle de alta. O segundo dia abre com um candle de corpo pequeno, seja de alta ou de baixa. No terceiro dia forma-se um candle de baixa, na posição inferior ao candle anterior.\n\n\nInterpretação\n\nEm uma tendência de alta, o mercado sinaliza a força dos compradores através do primeiro candle de alta e do gap do segundo dia formado pelo candle de corpo pequeno. No entanto, durante o dia as forças se equilibram, fazendo com que a abertura permaneça próxima ao fechamento, mostrando uma quebra na tendência de alta. A confirmação mostra-se no dia seguinte com um candle de baixa formando-se abaixo do candle anterior.\n\n\nDica\n\nQuanto maior for o último candle (de baixa), mais significativo será o sinal. \n\n-5  Estrela da noite\n-5.5 Estrela da noite Confirmado','result',''),
 (45,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n//  Harami cruz de alta (Bearish Harami Cross)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\nvar SombraSup1 = candles.getCandleSize(lastbar ,2 ,1);\nvar SombraInf1 = candles.getCandleSize(lastbar ,2 ,2);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+1,3);\n\nvar CandleDoji = candles.Doji(lastbar);\n\nSegundoCandleBaixa = (candles.Open(lastbar+1) > candles.Close(lastbar+1)) && (CorpoCandle2 > CorpoCandle1) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nPrimeiroCandleGAP = CandleDoji && ((candles.Close(lastbar) > candles.Close(lastbar+1)) && (candles.Close(lastbar) < candles.Open(lastbar+1))) && (candles.Open(lastbar) > candles.Close(lastbar+1)) && (candles.Open(lastbar) < candles.Open(lastbar+1)) && (SombraInf1 < (SombraSup1+CorpoCandle1)*2);\n\nHaramiCrossAlta = (TendenciaUltimosCandles==0) && SegundoCandleBaixa && PrimeiroCandleGAP;\n\nif (HaramiCrossAlta) {\n	result = 10;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n\n','Bullish Harami Cross','Harami cruz de alta (Bullish Harami Cross)\n\nDescrição : Primeiro dia onde os preços sofrem uma grande baixa.\nSegundo dia é uma doji que é engolfada pelo candle anterior.\n\nPsicologia\n\nO candle do segundo dia ,doji ,não penetra a máxima e a mínima do dia anterior e fecha exatamente aonde abriu.Volume no segundo é bem abaixo da média o que indica falta de força vendedora para continuar a tendência de baixa.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (46,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n//  Harami cruz de baixa (Bearish Harami Cross)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+1,3);\n\nvar CandleDoji = candles.Doji(lastbar);\n\nvar SegundoCandleBaixa = (candles.Open(lastbar+1) < candles.Close(lastbar+1)) && (CorpoCandle2 > CorpoCandle1) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nvar PrimeiroCandleGAP = CandleDoji && ((candles.Close(lastbar) > candles.Open(lastbar+1)) && (candles.Close(lastbar) < candles.Close(lastbar+1))) && (candles.Open(lastbar) > candles.Open(lastbar+1)) && (candles.Open(lastbar) < candles.Close(lastbar+1));\n\nvar HaramiCrossBaixa = (TendenciaUltimosCandles==1) && SegundoCandleBaixa && PrimeiroCandleGAP;\n\nif (HaramiCrossBaixa) {\n	result = -10;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n','Bearish Harami Cross','Harami cruz de baixa (Bearish Harami Cross)\n\nDescrição : Primeiro dia onde os preços sofrem uma grande alta.\nSegundo dia é uma doji que é engolfada pelo candle anterior.\n\nPsicologia\n\nO candle do segundo dia ,doji ,não penetra a máxima e a mínima do dia anterior e fecha exatamente aonde abriu.Volume no segundo é bem abaixo da média o que indica falta de força compradora para continuar a tendência de alta.\n\nTipo : BEARISH/BAIXA REVERSÃO','result',''),
 (47,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Harami Pattern (Bullish Harami)\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+2,lastbar+5);\n\nvar SegundoCandleBaixa = (candles.Open(lastbar+1) > candles.Close(lastbar+1)) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nvar PrimeiroCandle = ((candles.Open(lastbar) > candles.Open(lastbar+1)) && (candles.Close(lastbar) > candles.Open(lastbar+1)))  && ((candles.Open(lastbar) < candles.Close(lastbar+1)) && (candles.Close(lastbar) < candles.Close(lastbar+1)));\n\nvar HaramiPattern = (TendenciaUltimosCandles==0) && SegundoCandleBaixa && PrimeiroCandle;\n\nif (HaramiPattern) {\n	result = 10;\n}\n\n//=================================================================================\n// Harami Pattern (Bearish Harami)\n// Devo corrigir uma falha no papel Mediaset do dia 28/04/2009 que sinaliza uma baixa mas no dia seguinte é uma alta\nvar SegundoCandleBaixa = (candles.Open(lastbar+1) < candles.Close(lastbar+1)) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nvar HaramiPattern = (TendenciaUltimosCandles==1) && SegundoCandleBaixa && PrimeiroCandle;\n\nif (HaramiPattern) {\n	result = -10;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n','Bullish Harami','Harami de alta (Bullish Harami)\n\nPrimeiro dia onde os preços sofrem uma grande baixa.\nSegundo dia é uma estrela que é engolfada pelo candle anterior.\n\nPsicologia\n\nO candle do segundo dia ,estrela ,não penetra a máxima e a mínima do dia anterior.Volume no segundo é bem abaixo da média o que indica falta de força vendedora para continuar a tendência de baixa.Observe a mudança da tendência sendo confirmada caso os preços fechem acima da máxima do primeiro dia principalmente se esse rompimento for no dia seguinte a estrela.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (48,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Bearish Harami\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+2,lastbar+5);\n\nvar PrimeiroCandle = ((candles.Open(lastbar) > candles.Open(lastbar+1)) && (candles.Close(lastbar) > candles.Open(lastbar+1)))  && ((candles.Open(lastbar) < candles.Close(lastbar+1)) && (candles.Close(lastbar) < candles.Close(lastbar+1)));\n\nvar SegundoCandleBaixa = (candles.Open(lastbar+1) < candles.Close(lastbar+1)) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nvar HaramiPattern = (TendenciaUltimosCandles==1) && SegundoCandleBaixa && PrimeiroCandle;\n\nif (HaramiPattern) {\n	result = -10;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n','Bearish Harami','Harami de baixa (Bearish Harami)\n\nDescrição : Primeiro dia onde os preços sofrem uma grande alta.\nSegundo dia é uma estrela que é engolfada pelo candle anterior.\n\nPsicologia\n\nO candle do segundo dia, estrela, não penetra a máxima e a mínima do dia anterior.Volume no segundo é bem abaixo da média o que indica falta de força compradora para continuar a tendência de alta.Observe a mudança da tendência sendo confirmada caso os preços fechem abaixo da mínima do primeiro dia principalmente se esse rompimento for no dia seguinte a estrela.\n\nTipo : BEARISH/BAIXA REVERSÃO','result',''),
 (49,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0)\n    var SombraSup1 = candles.getCandleSize(lastbar, 2, 1);\n    var SombraInf1 = candles.getCandleSize(lastbar, 2, 2);\n\n    var CorpoCandle2 = candles.getCandleSize(lastbar + 1, 1, 0);\n    var SombraSup2 = candles.getCandleSize(lastbar + 1, 2, 1);\n    var SombraInf2 = candles.getCandleSize(lastbar + 1, 2, 2);\n\n    //=================================================================================\n    // Martelo invertido (Bullish Inverted Hammer)\n    var TendenciaUltimosCandles = candles.getTendencia(lastbar, lastbar + 4);\n\n    var PrimeiroCandleGAPBaixa = ((candles.Close(lastbar) < candles.Close(lastbar + 1)) && (candles.Open(lastbar) < candles.Close(lastbar + 1))) && ((candles.Close(lastbar) < candles.Open(lastbar + 1)) && (candles.Open(lastbar) < candles.Open(lastbar + 1))) && (SombraSup1 > (SombraInf1 * 2.5)) && (CorpoCandle1 < (SombraSup1 + SombraInf1));\n\n    var PrimeiroCandleLungaSombra = (SombraSup1 > ((CorpoCandle1 + SombraInf1) * 3));\n\n    var InvertedHammer = PrimeiroCandleGAPBaixa && (TendenciaUltimosCandles == 0) && PrimeiroCandleLungaSombra;\n\n    if (InvertedHammer) {\n        result = 13;\n    }\n\n    //=================================================================================\n    // Martelo invertido (Bullish Inverted Hammer) Confirmado\n    var TendenciaUltimosCandles = candles.getTendencia(lastbar + 1, lastbar + 5);\n\n    var SegundoCandleGAPBaixa = ((candles.Close(lastbar + 1) < candles.Close(lastbar + 2)) && (candles.Open(lastbar + 1) < candles.Close(lastbar + 2))) && ((candles.Close(lastbar + 1) < candles.Open(lastbar + 2)) && (candles.Open(lastbar + 1) < candles.Open(lastbar + 2))) && (SombraSup2 > (SombraInf2 * 2.5)) && (CorpoCandle2 < (SombraSup2 + SombraInf2));\n\n    PrimeiroCandleGAPAlta = (candles.Open(lastbar) > candles.Close(lastbar + 1)) && (candles.Open(lastbar) > candles.Open(lastbar + 1)) && (candles.Close(lastbar) > candles.Close(lastbar + 1)) && (candles.Close(lastbar) > candles.Open(lastbar + 1)) && (CorpoCandle1 > (SombraSup1 + SombraInf1));\n\n    SegundoCandleLungaSombra = (SombraSup2 > ((CorpoCandle2 + SombraInf2) * 3));\n\n    InvertedHammer = SegundoCandleGAPBaixa && PrimeiroCandleGAPAlta && (TendenciaUltimosCandles == 0) && SegundoCandleLungaSombra;\n\n    if (InvertedHammer) {\n        result = 13.5;\n    }\n\n    json.put(\"result\", result);\n    return json;\n\n}\n','Bullish Inverted Hammer','Martelo invertido (Bullish Inverted Hammer)\n\nDescriçao: Informaçoes colhida do livro Candlestick de Steve Nisson, pagina 75','result',''),
 (50,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Martelo (Bullish Hammer)\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1, 2 ,2);\n\nLarguraCandle2 = candles.getCandleSize(lastbar+1,3,0);   \n\nvar percLargCandle2 = 100 - Math.abs(((CorpoCandle2 / LarguraCandle2)*100)-100);\n\nvar CandlesTendencia = candles.getTendencia(lastbar+1 ,3);\n\nvar Martelo = (candles.Open(lastbar+1)!=candles.Close(lastbar+1)) && ((percLargCandle2 >10) && (percLargCandle2 <= 30)) &&  ( (SombraInf2 > CorpoCandle2*2) && ((SombraSup2 / (SombraInf2+CorpoCandle2) ) < 0.10) ) && (candles.Close(lastbar) > candles.Close(lastbar+1)) && (CandlesTendencia==0);\n\nif (Martelo) {\nresult=12;\n}\n\n\njson.put(\"result\",result);\nreturn json;\n\n}','Bullish Hammer','Martelo (Bullish Hammer)\n\nDescrição : Candle formado por um candle de corpo pequeno e longa sombra, a cor do candle não importa.\nLonga sombra formada, duas vezes maior que o corpo do candle, com nenhuma ou mínima sombra superior.\nA tendência obrigatoriamente deve ser de baixa.\n\nPsicologia\n\nComo qualquer candle único, confirmação é obrigatória para o candle funcionar.\nEsta formação apresenta uma grande força vendedora fazendo mínimas cada vez mais fortes no candle presente porém o mesmo reverte e fecha perto da abertura do dia.\nEsse fato tira a certeza dos vendidos que estão sobre controle. Para a confirmação do candle, seria bom o candle seguinte abrir  maior que a máxima do dia anterior e o fechamento apresentando força total dos compradores.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (51,'\nfunction applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Nuvens Negras -Dark Clouds (Bearish Dark Cloud Cover)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0)\nvar SombraSup1 = candles.getCandleSize(lastbar ,2 ,1);\nvar SombraInf1 = candles.getCandleSize(lastbar ,2 ,2);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar range50percCandle1 = ((Math.abs(candles.Close(lastbar+1) - candles.Open(lastbar+1)) / 100) * 50); //Retorna o valor do preço que representa 50%\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+1,lastbar+4);\n\nvar SegundoCandleAlta = (candles.Open(lastbar+1) < candles.Close(lastbar+1)) && ( CorpoCandle2 > (SombraSup2+SombraInf2) )\n\nvar PrimeiroCandleBaixa = ( CorpoCandle1 > (SombraSup1+SombraInf1) ) && ((candles.Open(lastbar) > candles.Close(lastbar+1)) && (candles.Close(lastbar) > candles.Open(lastbar+1))) && (candles.Open(lastbar) > candles.Close(lastbar)) && (candles.Close(lastbar) < candles.Close(lastbar+1) - range50percCandle1); //&& (candles.Low(lastbar) > candles.Open(lastbar+1))\n\nvar NuvensNegras = (TendenciaUltimosCandles==1) && SegundoCandleAlta && PrimeiroCandleBaixa\n\nif (NuvensNegras) {\nresult = -11;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n','Bearish Dark Cloud Cover','Nuvens Negras -Dark Clouds (Bearish Dark Cloud Cover)\n\nDescrição : Primeiro dia é completamente dominado pela força compradora.\nSegundo dia abre com gap de alta acima da máxima do dia anterior, porém fecha o dia abaixo da metade do corpo do candle do dia anterior.\n\nPsicologia\n\nCom o forte dia de comprados dominando e com o gap de alta no segundo dia, cada vez mais apresenta um cenário onde os comprados estão confiantes. No entanto, o segundo dia fecha o gap de alta e invade metade do corpo do candle anterior sendo assim colocando em xeque sua tendência de alta.\n\nTipo : BEARISH/BAIXA REVERSÃO','result',''),
 (52,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Nuvens Negras -Dark Clouds (Bearish Dark Cloud Cover)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\nvar SombraSup1 = candles.getCandleSize(lastbar ,2 ,1);\nvar SombraInf1 = candles.getCandleSize(lastbar ,2 ,2);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+1,lastbar+4);\nvar range50percCandle2 = ((Math.abs(candles.Open(lastbar+1) - candles.Close(lastbar+1)) / 100) * 40); //Retorna o valor do preço que representa 50%\n\nvar SegundoCandleAlta = (candles.Open(lastbar+1) > candles.Close(lastbar+1)) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nvar PrimeiroCandleBaixa = ( CorpoCandle1 > (SombraSup1+SombraInf1) ) && ((candles.Open(lastbar) < candles.Close(lastbar+1)) && (candles.Close(lastbar) >= candles.Close(lastbar+1))) && (candles.Open(lastbar) < candles.Close(lastbar)) && (candles.Close(lastbar) < candles.Close(lastbar+1) + range50percCandle2); //&& (candles.Low(lastbar) > candles.Open(lastbar+1))\n\nvar OnNeckPattern = (TendenciaUltimosCandles==0) && SegundoCandleAlta && PrimeiroCandleBaixa;\n\nif (OnNeckPattern) {\nresult = -14;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n\n\n\n','Bearish On/In-Neck & Thrusting Pattern','On/In-Neck & Thrusting Pattern\n\nDescrição : Uma variaçao do pattern Nuvens Negras, sendo que representa uma tendencia de queda.\n\nPsicologia\n\nTipo : BEARISH/ALTA REVERSÃO','result',''),
 (54,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Nuvens Negras -Dark Clouds (Bearish Dark Cloud Cover)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0)\nvar SombraSup1 = candles.getCandleSize(lastbar ,2 ,1);\nvar SombraInf1 = candles.getCandleSize(lastbar ,2 ,2);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+1,lastbar+4);\nvar range50percCandle2 = ((Math.abs(candles.Open(lastbar+1) - candles.Close(lastbar+1)) / 100) * 40); //Retorna o valor do preço que representa 50%\n\nvar SegundoCandleAlta = (candles.Open(lastbar+1) > candles.Close(lastbar+1)) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nvar PrimeiroCandleBaixa = ( CorpoCandle1 > (SombraSup1+SombraInf1) ) && ((candles.Open(lastbar) < candles.Close(lastbar+1)) && (candles.Close(lastbar) >= candles.Close(lastbar+1))) && (candles.Open(lastbar) < candles.Close(lastbar)) && (candles.Close(lastbar) < candles.Close(lastbar+1) + range50percCandle2); \n\nvar OnNeckPattern = (TendenciaUltimosCandles==0) && SegundoCandleAlta && PrimeiroCandleBaixa;\n\nif (OnNeckPattern) {\nresult = -14;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n\n','Bearish On-Neck Pattern','On-Neck Pattern\n\nDescrição : Uma variaçao do pattern Nuvens Negras, sendo que representa uma tendencia de queda\n\nPsicologia\n\nTipo : BEARISH/ALTA REVERSÃO','result',''),
 (55,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0);\n    var SombraSup1 = candles.getCandleSize(lastbar, 2, 1);\n    var SombraInf1 = candles.getCandleSize(lastbar, 2, 2);\n\n    var CorpoCandle2 = candles.getCandleSize(lastbar + 1, 1, 0);\n    var SombraSup2 = candles.getCandleSize(lastbar + 1, 2, 1);\n    var SombraInf2 = candles.getCandleSize(lastbar + 1, 2, 2);\n\n    var range50percCandle2 = ((Math.abs(candles.Open(lastbar + 1) - candles.Close(lastbar + 1)) / 100) * 50); //Retorna o valor do preço que representa 50%\n    var TendenciaUltimosCandles = candles.getTendencia(lastbar + 1, 4);\n\n    var SegundoCandleAlta = (candles.Open(lastbar + 1) > candles.Close(lastbar + 1)) && (CorpoCandle2 > (SombraSup2 + SombraInf2));\n\n    var PrimeiroCandleBaixa = (CorpoCandle1 > (SombraSup1 + SombraInf1)) && ((candles.Open(lastbar) < candles.Close(lastbar + 1)) && (candles.Close(lastbar) < candles.Open(lastbar + 1))) && (candles.Open(lastbar) < candles.Close(lastbar)) && (candles.Close(lastbar) >= candles.Open(lastbar + 1) - range50percCandle2); //&& (candles.Low(lastbar) > candles.Open(lastbar+1))\n    var BullishPiercing = SegundoCandleAlta && PrimeiroCandleBaixa;\n\n    if (BullishPiercing) {\n        result = 14;\n        if (TendenciaUltimosCandles == 0) {\n            result = 14.5;\n        }\n\n    }\n\n    json.put(\"result\", result);\n    return json;\n\n}\n','Bullish Piercing Line','Padrão Piercing\n(Bullish Piercing Line)\n\nDescrição : Primeiro dia é completamente dominado pela força vendedora.\nSegundo dia abre com gap de baixa abaixo da mínima do dia anterior, porém fecha o dia acima da metade do corpo do candle do dia anterior.\n\nPsicologia\n\nCom o forte dia de vendidos dominando e com o gap de baixa no segundo dia, cada vez mais apresenta um cenário onde os vendidos estão confiantes. No entanto, o segundo dia fecha o gap de baixa e invade metade do corpo do candle anterior sendo assim colocando em xeque sua tendência de baixa.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (56,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Padrão Piercing (Bullish Piercing Line)\n\n//var CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0)\n//var SombraSup1 = candles.getCandleSize(lastbar ,2 ,1);\n//var SombraInf1 = candles.getCandleSize(lastbar ,2 ,2);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar CorpoCandle3 = candles.getCandleSize(lastbar+2 ,1 ,0);\nvar SombraSup3 = candles.getCandleSize(lastbar+2 ,2 ,1);\nvar SombraInf3 = candles.getCandleSize(lastbar+2,2 ,2);\n\nvar ValorMetadeCandle2 = ((candles.Open(lastbar+2) - candles.Close(lastbar+2))/2)+candles.Close(lastbar+2);\n\nvar CandleValidation = candles.Close(lastbar+1) > ValorMetadeCandle2;\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+2,lastbar+4);\n\nvar TerceiroCandleBaixa = (candles.Open(lastbar+2) > candles.Close(lastbar+2)) && ( CorpoCandle3 > (SombraSup3+SombraInf3) );\n\nvar SegundoCandleAlta = ((candles.Close(lastbar+1) > candles.Close(lastbar+2)) && (candles.Close(lastbar+1) < candles.Open(lastbar+2)) && (candles.Open(lastbar+1) < candles.Close(lastbar+2)) )  &&  ( CorpoCandle2 > (SombraSup2+SombraInf2) ) && CandleValidation;\n\nvar PrimeiroCandleAlta = (candles.Close(lastbar) > candles.Close(lastbar+1))\n\nvar CandleValidation = (TendenciaUltimosCandles==0) && TerceiroCandleBaixa && SegundoCandleAlta && PrimeiroCandleAlta\n\nif (CandleValidation) {\nresult = 14.5;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n\n','Bullish Piercing Line Approval','Padrão Piercing\n(Bullish Piercing Line)\n\nDescrição : Primeiro dia é completamente dominado pela força vendedora.\nSegundo dia abre com gap de baixa abaixo da mínima do dia anterior, porém fecha o dia acima da metade do corpo do candle do dia anterior.\n\nPsicologia\n\nCom o forte dia de vendidos dominando e com o gap de baixa no segundo dia, cada vez mais apresenta um cenário onde os vendidos estão confiantes. No entanto, o segundo dia fecha o gap de baixa e invade metade do corpo do candle anterior sendo assim colocando em xeque sua tendência de baixa.\n\nTipo : BULLISH/ALTA REVERSÃO','result',''),
 (57,'function applyScript(candles, json, lastbar, script, input) {\n\nvar result = 0;\n\n//=================================================================================\n// Piercing no pescoço (Bearish In-Neck)\n\nvar CorpoCandle1 = candles.getCandleSize(lastbar ,1 ,0);\nvar SombraSup1 = candles.getCandleSize(lastbar ,2 ,1);\nvar SombraInf1 = candles.getCandleSize(lastbar ,2 ,2);\n\nvar CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\nvar SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\nvar SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n\nvar TendenciaUltimosCandles = candles.getTendencia(lastbar+1,3);\n\nvar SegundoCandleBaixa = (candles.Open(lastbar+1) > candles.Close(lastbar+1)) && ( CorpoCandle2 > (SombraSup2+SombraInf2) );\n\nvar rangeMaximo = (((candles.Open(lastbar+1) - candles.Close(lastbar+1)) / 100) * 20); //Retorna o valor do preço que representa 10%\n\nvar PrimeiroCandleAlta = (candles.Close(lastbar) > candles.Open(lastbar)) && ((candles.Close(lastbar) < (candles.Close(lastbar+1) + rangeMaximo)) && (candles.Close(lastbar) > (candles.Close(lastbar+1) - rangeMaximo)) ) &&  ( CorpoCandle1 > (SombraSup1+SombraInf1) );\n\nvar PadraoPiercing = (TendenciaUltimosCandles==0) && SegundoCandleBaixa && PrimeiroCandleAlta;\n\nif (PadraoPiercing) {\nresult = 15;\n}\n\njson.put(\"result\",result);\nreturn json;\n\n}\n\n','Bearish In-Neck','Piercing no pescoço (Bearish In-Neck)\n\nDescrição : Primeiro dia com força vendedora dominando.\nSegundo dia abre abaixo da mínima do dia anterior e a força compradora domina o movimento fechando no ponto de fechamento do dia anterior.\n\nPsicologia\n\nSemelhante a formação (Bearish On Neck), exceto que a tendência de baixa não deve seguir tão rapidamente.\n\nTipo : BEARISH/BAIXA CONTINUAÇÃO','result',''),
 (58,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    //=================================================================================\n    // Piercing perto do pescoço (Bearish On-Neck)\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0);\n    var SombraSup1 = candles.getCandleSize(lastbar, 2, 1);\n    var SombraInf1 = candles.getCandleSize(lastbar, 2, 2);\n\n    var CorpoCandle2 = candles.getCandleSize(lastbar + 1, 1, 0);\n    var SombraSup2 = candles.getCandleSize(lastbar + 1, 2, 1);\n    var SombraInf2 = candles.getCandleSize(lastbar + 1, 2, 2);\n    var TendenciaUltimosCandles = candles.getTendencia(lastbar + 1, lastbar + 3);\n\n    var SegundoCandleBaixa = (candles.Open(lastbar + 1) > candles.Close(lastbar + 1)) && (CorpoCandle2 > (SombraSup2 + SombraInf2));\n\n    var rangeMaximo = (((candles.High(lastbar + 1) - candles.Low(lastbar + 1)) / 100) * 18); //Retorna o valor do preço que representa 10%\n    var PrimeiroCandleAlta = (candles.Close(lastbar) > candles.Open(lastbar)) && ((candles.Close(lastbar) < (candles.Low(lastbar + 1) + rangeMaximo)) && (candles.Close(lastbar) > (candles.Low(lastbar + 1) - rangeMaximo))) && (CorpoCandle1 > (SombraSup1 + SombraInf1));\n\n    var CandleValidation = (TendenciaUltimosCandles == 0) && SegundoCandleBaixa && PrimeiroCandleAlta;\n\n    if (CandleValidation) {\n        result = 16;\n    }\n\n    json.put(\"result\", result);\n    return json;\n\n}\n','Bearish On-Neck','Piercing perto do pescoço (Bearish On-Neck)\n\nDescrição : Primeiro dia é completamente dominado pela força vendedora.\nSegundo dia abre com gap de baixa e fecha na mínima do dia anterior.\n\nPsicologia\n\nSegundo dia não apresenta forças para romper a mínima do dia seguinte para assim romper a tendência de baixa, com isso causa desconforto nos comprados que entraram na operação no segundo dia. Tendência de baixa deve continuar nos dias seguintes.\n\nTipo : BEARISH/BAIXA CONTINUAÇÃO','result','');
INSERT INTO `scripts` (`id`,`script`,`name`,`descr`,`param`,`settingchart`) VALUES 
 (59,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    //=================================================================================\n    // Martelo invertido (Bullish Inverted Hammer)\n    var CorpoCandle1 = candles.getCandleSize(lastbar, 1, 0);\n    var SombraSup1 = candles.getCandleSize(lastbar, 2, 1);\n    var SombraInf1 = candles.getCandleSize(lastbar, 2, 2);\n\n    //var CorpoCandle2 = candles.getCandleSize(lastbar+1 ,1 ,0);\n    //var SombraSup2 = candles.getCandleSize(lastbar+1 ,2 ,1);\n    //var SombraInf2 = candles.getCandleSize(lastbar+1 ,2 ,2);\n    var TendenciaUltimosCandles = candles.getTendencia(lastbar + 1, lastbar + 3);\n\n    var SegundoCandle = (candles.Open(lastbar + 1) < candles.Close(lastbar + 1)) //&& ( CorpoCandle2 > (SombraSup2+SombraInf2) )\n    var PrimeiroCandleGAPAlta = (candles.Close(lastbar) > candles.Close(lastbar + 1)) && (candles.Open(lastbar) > candles.Close(lastbar + 1)) && (SombraSup1 > (SombraInf1 * 2.5)) && (CorpoCandle1 < (SombraSup1 + SombraInf1));\n\n    var PrimeiroCandleLungaSombra = (SombraSup1 > ((CorpoCandle1 + SombraInf1) * 4));\n\n    var ShootingStar = SegundoCandle && PrimeiroCandleGAPAlta; //(TendenciaUltimosCandles==1)\n    if (ShootingStar) {\n        result = 1;\n        if (PrimeiroCandleLungaSombra) {\n            result = 1.5;\n        }\n        if (TendenciaUltimosCandles != 0) {\n            result = -result;\n        }\n    }\n\n    json.put(\"result\", result);\n    return json;\n\n}\n','Shooting Star','','result',''),
 (60,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n\n    //=================================================================================\n    //  Three stars in the south\n    var myMediaMinima = candles.getVolumeMedioMinimo(lastbar, 5);\n    var TerceiroCandleBaixa = (candles.Open(lastbar + 2) > candles.Close(lastbar + 2));\n    var SegundoCandleBaixa = (candles.Open(lastbar + 1) > candles.Close(lastbar + 1)) && (candles.High(lastbar + 1) < candles.High(lastbar + 2)) && (candles.Low(lastbar + 1) > candles.Low(lastbar + 2));\n    var PrimeiroCandleBaixa = (candles.Open(lastbar) > candles.Close(lastbar)) && (candles.High(lastbar) < candles.High(lastbar + 1)) && (candles.Low(lastbar) > candles.Low(lastbar + 1));\n    var ThreeStartSouth = TerceiroCandleBaixa && SegundoCandleBaixa && PrimeiroCandleBaixa; //&& (TendenciaUltimosCandles==0)\n    if (ThreeStartSouth && (myMediaMinima <= candles.Volume(lastbar))) {\n        println(\"ThreeStartSouth : \" + ThreeStartSouth);\n        println(\"candles.Volume(\" + lastbar + \"): \" + candles.Volume(lastbar));\n\n        result = 1;\n    }\n\n    json.put(\"result\", result);\n    return json;\n}\n','ThreeStartSouth','Three stars in the south\n\nEsse tipo de candle precisa de uma confirmaçao antes de operar','result',''),
 (61,'function applyScript(candles, json, lastbar, script, input) {\n\n    var result = 0;\n    var CorpoCandle1DentroCandle2 = ((candles.Close(lastbar) > candles.Close(lastbar + 1)) && (candles.Close(lastbar) < candles.Open(lastbar + 1))) && (candles.Open(lastbar) > candles.Close(lastbar + 1)) && (candles.Open(lastbar) < candles.Open(lastbar + 1)) || ((candles.Close(lastbar) < candles.Close(lastbar + 1)) && (candles.Close(lastbar) > candles.Open(lastbar + 1))) && (candles.Open(lastbar) < candles.Close(lastbar + 1)) && (candles.Open(lastbar) > candles.Open(lastbar + 1));\n\n    var rangePerc = (((candles.High(lastbar + 1) - candles.Low(lastbar + 1)) / 100) * 30); //Retorna o valor do preço que representa 5%\n    var TweezersTop = (candles.High(lastbar) > candles.High(lastbar + 1) - rangePerc) && (candles.High(lastbar) < candles.High(lastbar + 1) + rangePerc);\n    //var TweezersBottom =  (candles.Low(lastbar) < candles.Low(lastbar+1) + rangePerc) && (candles.Low(lastbar) > candles.Low(lastbar+1) - rangePerc);\n    //=================================================================================\n    // TWEEZERS TOPS && BOTTOMS\n//    var HaramiCross = script.get(\"result\", script.call(\"Bearish Harami Cross\", lastbar, input));\n    //=================================================================================\n    // Tewwzers Top & HangingMan\n    var isUpDownTrend = candles.isCandleLongTrend(lastbar,3); \n    var isHangingManORHammer = candles.isHangingManORHammer(lastbar);\n    var isShootingStar = script.get(\"result\", script.call(\"Shooting Star\", lastbar, input));\n    var isDarkCloudCover = script.get(\"result\", script.call(\"Bearish Dark Cloud Cover\", lastbar, input));\n\n    if (isHangingManORHammer == 1) && CorpoCandle1DentroCandle2 && (isUpDownTrend == 0) {\n        result = -20;\n    }\n\n    if (isUpDownTrend == 1) && (isDarkCloudCover != 0) && TweezersTop {\n        result = -20;\n    }\n\n    if (isUpDownTrend == 1) && (isHangingManORHammer == 1) && CorpoCandle1DentroCandle2 {\n        result = -20;\n    }\n\n    if (isUpDownTrend == 1) && (isShootingStar > 0) && TweezersTop && CorpoCandle1DentroCandle2 {\n        result = -20;\n    }\n\n    //=================================================================================\n    //if (HaramiCross != 0) && TweezersTop && CorpoCandle1DentroCandle2 {\n    // resultTop = candles.High\n    //}\n\n    json.put(\"result\", result);\n    return json;\n\n}\n','Tweezers Tops & Bottoms','Tweezers Tops & Bottoms\n\nEsse indicador serve para identificar os Topos e Fundos.\n\nEsse algoritimo é imcompleto e jà que nao serà util ao momento enquanto nao termino os Candles, deixo para completar depois.\n\nO livro de referencia é \"Steve Nisson - Japonese Candlesticks Charting Techniques\" pagina 88 Adobe Page 99','result',''),
 (64,'function applyScript(candle, json, lastbar, script, input) {\n\n    var ncandles = parseInt(input.get(\"ncandles\"));\n    var tipo = input.get(\"tipo\");\n    var totale = 0;\n\n    for (var x = lastbar; x < (lastbar + ncandles); x++) {\n        if (tipo == null) {\n            totale += candle.Close(x);\n        }\n        if (tipo != null) {\n            if (tipo.equals(\"High\")) {\n                totale += candle.High(x);\n            }\n            if (tipo.equals(\"Low\")) {\n                totale += candle.Low(x);\n            }\n        }\n    }\n\n    var media = totale / ncandles;\n\n    json.put(\"result\", media);\n\n    return json;\n}\n','$MMS','Media Moveis Simples(nperiodos)','result',''),
 (65,'function applyScript(candle, json, lastbar, script, input) {\n\n    var ncandles = parseInt(input.get(\"ncandles\"));\n    var U = 0;\n    var D = 0;\n    for (var x = lastbar; x < (lastbar + ncandles); x++) {\n        if (candle.Close(x) > candle.Close(x + 1)) {\n            U += candle.Close(x) - candle.Close(x + 1);\n            D += 0;\n        } else {\n            U += 0;\n            D += candle.Close(x + 1) - candle.Close(x);\n        }\n    }\n    var RS = U / D;\n    var RSI = 100 - (100 * (1 / (1 + RS)));\n\n    json.put(\"result\", RSI);\n    return json;\n}\n','$IFR','Indice de Força Relativa(ncandles)','result',''),
 (66,'function applyScript(candle, json, lastbar, script, input) {\n\n    json.put(\"result\", 0);\n    return json;\n}\n','@MM13 & IFR14','DESCRIÇÃO DO SETUP\n\nGrafico de 15 minutos. Incluo ifr de 14 e uma media aritmética de 13 periodos.\nQuando a media de 13 furar de cima para baixo o ifr eu marco a mínima do candle que produziu isso. Quando a media 13 virar para cima, assumo entrada ao romper a máxima do candle que fez isso.\nSAR colabora no stop.\n\nENTRADA\n\nLong :\nMedia de 13 furou para cima o ifr, eu compro se romper a máxima do candle que fez isso com estope na mínima.\nShort:\nMedia de 13 furou para baixo o ifr, ao perder a mínima Do candle que fez isso inicio venda.\n\nSAÍDA\n\nStop-loss:Na compra, mínima do candle rompido.\nNa venda, máxima do candle que teve sua mínima perdida.\n.\nStop-gain: Vende Pelo SAR ou fecho no final do dia.\nNa venda, recompra pelo SAR, ou fecho no final do dia.\n\nSe o sinal de operação oposta for acionado termino trade igualmente e reverto posição. \n-------------------------------------\n\nhttp://www.leandrostormer.com.br/view/publico/desafioTatica.aspx?id=68&hash=2140705779','result',''),
 (67,'function applyScript(candle, json, lastbar, script, input) {\n\n    var HLd = 0;\n    var HLv = 0;\n    var HiLo = 0;\n\n    input.put(\"ncandles\", \"6\");\n    input.put(\"tipo\", \"High\");\n    var MM3H_Simple = script.get(\"result\", script.call(\"$MMS\", lastbar + 1, input));\n    var MM3H_S_Cur = script.get(\"result\", script.call(\"$MMS\", lastbar, input));\n\n    input.put(\"ncandles\", \"6\");\n    input.put(\"tipo\", \"Low\");\n    var MM3L_Simple = script.get(\"result\", script.call(\"$MMS\", lastbar + 1, input));\n    var MM3L_S_Cur = script.get(\"result\", script.call(\"$MMS\", lastbar, input));\n\n/*\n    println(\"MM3H_Simple = \" + MM3H_Simple);\n    println(\"MM3H_S_Cur  = \" + MM3H_S_Cur);\n    println(\"MM3L_Simple = \" + MM3L_Simple);\n    println(\"MM3L_S_Cur  = \" + MM3L_S_Cur);\n*/\n    if (candle.Close(lastbar) > MM3H_Simple) {\n        HLd = 1;\n    } else if (candle.Close(lastbar) < MM3L_Simple) {\n        HLd = -1;\n    } else {\n        HLd = 0;\n    }\n\n    if (HLd != 0) {\n        HLv = HLd;\n    }\n\n    HiLo = (HLv == -1) ? MM3H_S_Cur : MM3L_S_Cur;\n\n    json.put(\"result\", HiLo);\n    return json;\n\n}\n\n/*\nGann High Low - Metastock Indicator Formula\nby Adam Hefner\n{name: GANN-HiLo}\n\nHLd:=If(CLOSE>Ref(Mov(H,3,S),-1),\n{then}1,\n{else}If(CLOSE<Ref(Mov(L,3,S),-1),\n{then}-1,\n{else}0));\nHLv:=ValueWhen(1,HLd<>0,HLd);\nHiLo:=If(HLv=-1,\n{then}Mov(H,3,S),\n{else}Mov(L,3,S));\nHiLo;\n*/','@HiLo','Interpretation\n\nThe Gann HiLo Activator is meant to be used in conjuction with the Gann Swing Oscillator and Gann Trend Oscillator indicators to form a trading system methodology commonly referred to as the \"New Gann Swing Chartist Plan\". Within this methodology the Gann HiLo Activator can be used as an entry trigger and stoploss point. When price is above the HiLo Activator it can be used as a buy stop (uses the previous periods lows for calculations) and when price is below the HiLo Activator it can be used as a sell stop (using the previous periods highs for calculation).','result',''),
 (68,'function applyScript(candle, json, lastbar, script, input) {\n\n    var ncandles = parseInt(input.get(\"ncandles\"));\n    var ema = candle.Close(lastbar);\n    var T = 2 / (ncandles + 1);\n\n    for (var x = lastbar; x < (lastbar + ncandles); x++) {\n        var barClose = candle.Close(x);\n        ema += (barClose - ema) * T;\n    }\n    json.put(\"result\", ema);\n    return json;\n}\n','$MME','Media Moveis Exponenciais(nperiodos)','result','#000000,#000000,histograma,0,result|undefined'),
 (69,'function applyScript(candle, json, lastbar, script, input) {\n\n    input.put(\"ncandles\", \"6\");\n    var HiLo = script.get(\"result\", script.call(\"@HiLo\", lastbar, input));\n    var HiLo_1 = script.get(\"result\", script.call(\"@HiLo\", lastbar + 1, input));\n    var HiLo_2 = script.get(\"result\", script.call(\"@HiLo\", lastbar + 2, input));\n\n    input.put(\"ncandles\", \"5\");\n    var MME_5 = script.get(\"result\", script.call(\"$MME\", lastbar, input));\n\n    input.put(\"ncandles\", \"10\");\n    var MME_10 = script.get(\"result\", script.call(\"$MME\", lastbar, input));\n\n    input.put(\"ncandles\", \"21\");\n    var MME_21 = script.get(\"result\", script.call(\"$MME\", lastbar, input));\n\n    var Long = (HiLo < candle.Close(lastbar)) && (candle.Close(lastbar) > MME_21) && (MME_5 > MME_10);\n\n    var Short = (HiLo > candle.Close(lastbar)) && (candle.Close(lastbar) < MME_21) && (MME_10 > MME_5);\n\n    var Stop_Gain = 0;\n    var Stop_Loss = 0;\n    var Stop_Inicial = 0;\n    var buy = input.get(\"buy\");\n\n    if (buy != null) {\n        Stop_Gain = (candle.Close(lastbar) > (buy * 1.10));\n\n        if (((HiLo < HiLo_1) && (HiLo_1 > HiLo_2)) || ((HiLo > HiLo_1) && (HiLo_1 < HiLo_2))) {\n            Stop_Loss = candle.Close(lastbar);\n        }\n\n        if (HiLo == buy) {\n            Stop_Inicial = candle.Close(lastbar);\n        }\n    }\n\n    json.put(\"input_long\", (Long) ? candle.Close(lastbar) : 0);\n    json.put(\"input_short\", (Short) ? candle.Close(lastbar) : 0);\n    json.put(\"stop_gain\", Stop_Gain);\n    json.put(\"stop_loss\", Stop_Loss);\n    json.put(\"stop_inicial\", Stop_Inicial);\n    return json;\n}\n','@Setup Pedrina','','input_long,input_short,stop_gain,stop_loss,stop_inicial','#FE0101,#FE0101,line,0,result|undefined'),
 (72,'function applyScript(candle, json, lastbar, script, input) {\n\n    var totSMA = 0;\n\n    var ncandles = parseInt(input.get(\"ncandles\"));\n\n//    input.put(\"ncandles\", \"6\");\n\n    for (var x = lastbar; x < (lastbar + ncandles); x++) {\n        //MMS é igual a SMA\n        totSMA += parseFloat(script.get(\"result\",script.call(\"$MMS\", x, input)));\n    }\n\n    TMA = totSMA / parseFloat(ncandles);\n\n    json.put(\"result\", TMA);\n    return json;\n\n}\n','$TMA','Triangular Moving Average (TMA)\nDescription: \n\nThe triangular moving average (TMA) is a weighted average of the last n prices (P), whose result is equivalent to a double smoothed simple moving average (i.e. calculated twice).\nCalculation:\n    SMA = (P1 + P2 + P3 + P4 + ... + Pn) / n\n\n    TMA = (SMA1 + SMA2 + SMA3 + SMA4 + ... SMAn) / n\nTrading Use\n\nAs with other moving averages, the triangular moving average can be used to identify a trend by using the slope of the average (or lack of slope in a ranging market). However, due to the additional smoothing, triangular moving averages tend to be smoother, and have more waves, than standard moving averages. Interestingly, triangular moving averages often appear more responsive to direction changes, even though the additional smoothing actually moves the domainant input value to the middle of the input series (which would decrease responsiveness).','result',''),
 (73,'function applyScript(candle, json, lastbar, script, input) {\n\n    input.put(\"ncandles\", \"21\"); //Modifiquei de 8 para 21 periodos \n    try {\n        var TMA = parseFloat(script.get(\"result\", script.call(\"$TMA\", lastbar, input)));\n\n        json.put(\"TMAp\", (TMA * 1.12));\n        json.put(\"TMA\", TMA);\n        json.put(\"TMAm\", (TMA / 1.1));\n    } catch(err) {\n        json.put(\"TMAp\", 0);\n        json.put(\"TMA\", 0);\n        json.put(\"TMAm\", 0);\n}\n    return json;\n\n}\n','@Bandando','DESCRIÇÃO DO SETUP \n\nUtiliza Bandas High Low com saída na banda média. As Bandas High Low consistem em uma média móvel triangular calculada a partir do preço, substituíndo a variação por uma porcentagem fixa e incluindo um valor médio. Quando os preços sobem acima da banda superior ou cai abaixo da banda inferior, uma mudança de direção pode ocorrer quando o preço penetrar novamente a banda após uma pequena reversão na direção oposta.\n• O cálculo deve ser feito utilizando um período de 8 dias.\n• Opera-se tanto na compra quanto na venda. \nA operação é feita na abertura do mercado.\n• O indicador deve ser aplicado simultaneamente ao papel e ao índice Bovespa. A ordem é enviada apenas quando houver concordância nos sinais de compra ou venda.\n• A operação é mantida por no máximo 10 dias.\n• O stop-loss é fixado em 30% de perda, tanto na compra quanto na venda.\nENTRADA\n\nSe o preço de fechamento for maior que a banda superior, venda.\nSe o preço de fechamento é menor que a banda inferior, compra.\nUma média móvel simples é utilizada para fazer os cálculos iniciais.\nSAÍDA\n\nSe o preço de fechamento for maior que a banda superior, venda.\nSe o preço de fechamento é menor que a banda inferior, compra.\nUma média móvel simples é utilizada para fazer os cálculos iniciais.\nTAMANHO DA POSIÇÃO\n\nPerda no máximo de 9% do total em uma operação.','TMAp,TMA,TMAm',''),
 (75,'function applyScript(candle, json, position, script, input) {\n\n    // WMA - Weighted Moving Average\n    var wma = 0;\n    var ncandles = parseInt(script.get(\"ncandles\"));\n    for (var bar = lastbar; bar <= ncandles; bar++) {\n        wma += candle.Close(bar) * (bar + 1);\n    }\n\n    var value = wma / (ncandles * (ncandles + 1) / 2);\n    json.put(\"result\", value)\n    return json;\n}\n','$WMA','WMA - Weighted Moving Average','result',''),
 (76,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n\n    var rs = script.call(\"@Setup Pedrina\", lastbar, input);\n\n    json.put(\"close2\", candles.Close(lastbar));\n\n    json.put(\"input_long\", script.get(\"input_long\",rs));\n    json.put(\"input_short\", script.get(\"input_short\",rs));\n\n/*\n    json.put(\"stop_gain\", script.get(\"stop_gain\",rs));\n    json.put(\"stop_loss\", script.get(\"stop_loss\",rs));\n    json.put(\"stop_inicial\", script.get(\"stop_inicial\",rs));\n*/\n    return json;\n}\n','script 02','','close2,input_long,input_short','#000000,#FE0101,line,0,close2|#93B0C1,#FE0101,histograma,0,input_long|#100078,#100078,histograma,0,input_short'),
 (77,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n\ninput.put(\"ncandles\",\"14\");\n    var rs = script.call(\"$IFR\", lastbar, input); \n\n    json.put(\"result\", script.get(\"result\",rs));\n\n    return json;\n}\n','script 03','','result','#000000,#FE0101,line,0,result|undefined'),
 (78,'function applyScript(candle, json, position, script, input) {\n    try {\n        var squareSum = 0;\n        var sum = 0;\n        var lastbar = parseInt(position);\n        var ncandles = parseFloat(input.get(\"ncandles\"));\n        var deviations = input.get(\"deviations\");\n        for (var bar = lastbar; bar < (lastbar + ncandles); bar++) {\n            var barClose = candle.Close(bar);\n            sum += barClose;\n            squareSum += barClose * barClose;\n        }\n\n        var stDev = ncandles * squareSum - sum * sum;\n        stDev /= (ncandles * (ncandles - 1)) ;\n        stDev = Math.sqrt(stDev);\n\n        var value = sum / ncandles + deviations * stDev;\n        json.put(\"result\", value);\n    } catch(err) {\n        json.put(\"result\", 0);\n    }\n    return json;\n}\n','$BollingerUpper','Upper Bollinger Band','result',''),
 (79,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n    input.put(\"ncandles\",21);\n    input.put(\"deviations\",2.0);\n\n    var upper = script.get(\"result\",script.call(\"$BollingerUpper\", lastbar, input));\n    var middle = script.get(\"result\",script.call(\"$BollingerMiddle\", lastbar, input));\n    var lower = script.get(\"result\",script.call(\"$BollingerLower\", lastbar, input));\n\n    json.put(\"upper\", upper);\n    json.put(\"middle\", middle);\n    json.put(\"lower\", lower);\n    json.put(\"closeX\", candles.Close(lastbar));\n    return json;\n}\n','$BandsBollinger','','closeX,upper,lower,middle','#CBCBCB,#CBCBCB,histograma,0,closeX|#1241FE,#FE0101,line,0,upper|#0D873A,#0D873A,line,0,lower|#BC2525,#BC2525,line,0,middle'),
 (80,'function applyScript(candle, json, position, script, input) {\n    try {\n        var squareSum = 0;\n        var sum = 0;\n        var lastbar = parseInt(position);\n        var ncandles = parseFloat(input.get(\"ncandles\"));\n        var deviations = input.get(\"deviations\");\n        for (var bar = lastbar; bar < (lastbar + ncandles); bar++) {\n            var barClose = candle.Close(bar);\n            sum += barClose;\n            squareSum += barClose * barClose;\n        }\n\n        var stDev = ncandles * squareSum - sum * sum;\n        stDev /= (ncandles * (ncandles - 1)) ;\n        stDev = Math.sqrt(stDev);\n\n        var value = sum / ncandles - deviations * stDev;\n        json.put(\"result\", value);\n    } catch(err) {\n        json.put(\"result\", 0);\n    }\n    return json;\n}\n','$BollingerLower','Lower Bollinger Band','result',''),
 (81,'function applyScript(candle, json, position, script, input) {\n    try {\nvar sum = 0;\n        var lastbar = parseInt(position);\n        var ncandles = parseFloat(input.get(\"ncandles\"));\n        for (var bar = lastbar; bar < (lastbar + ncandles); bar++) {\n            sum += candle.Close(bar);\n        }\n\n        var value = sum / ncandles;\n        json.put(\"result\", value);\n    } catch(err) {\n        json.put(\"result\", 0);\n    }\n    return json;\n}\n','$BollingerMiddle','Middle Bollinger Band','result',''),
 (82,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n\n    var jumper_buy = script.get(\"result\", script.call(\"@Jumper_Buy\", lastbar, input));\n    var jumper_target = script.get(\"result\", script.call(\"@Jumper_Target\", lastbar, input));\n    var jumper_stoploss = script.get(\"result\", script.call(\"@Jumper_StopLoss\", lastbar, input));\n\n    json.put(\"buy\", jumper_buy);\n    json.put(\"target\", jumper_target);\n    json.put(\"stoploss\", jumper_stoploss);\n\n    return json;\n}\n','script 04',' DESCRIÇÃO DO SETUP\n\n• Setup contra a tendência, tanto para compra como para venda (long ou short);\n• Utiliza apenas gráficos diários;\n• Atua na tentativa de identificar região sobre-comprada (sobre-vendida), força atuante no mercado (compradores ou vendedores), um sinal claro de mudança da tendência, além de aproveitar-se também da propriedade de retorno a média vigente nas variações de preços. Traça targets (alvos) de acordo com a volatilidade do ativo no momento;\n• Simples de se identificar visualmente, não é preciso mais do que 10 minutos diários para acompanhar mais de 30 ativos;\n• Estratégia rara. Ocorre de uma a duas vezes por ativo por ano. É uma estratégia complementar, utilizada em combinação com alguma outra que seja freqüente. Pode ser aplicado em qualquer ativo, com eficiência parecida;\n• Serão apresentados somente os resultados das operações Long;\n\nENTRADA\n\nLong (Short): os seguintes critérios devem ser satisfeitos, simultaneamente:\nA. Pelo menos 50% do candle abaixo (acima) da Banda de Bollinger Inferior (Superior), aritmética, com 20 períodos e 2 desvios; (PARA DETECTAR MERCADO SOBRE-VENDIDO OU SOBRE-COMPRADO)\nB. O Fechamento a, no máximo (mínimo), 25% (75%) da máxima do dia; (PARA DETECTAR FORÇA ATUANTE E SINAL CLARO DE REVERSÃO DA TENDÊNCIA)\nEntrada sempre nos fechamentos;\nNão entrar se o objetivo for menor que 3%;\n\nSAÍDA\n\n• Stop loss: abaixo (acima) da mínima (máxima) do candle que gerou a entrada, ou abaixo (acima) da mínima (máxima) do fundo (topo) imeditato a que o candle que gerou a entrada pertence. (GARANTIA DE CONTINUAÇÃO DO MOVIMENTO E FALHA NAS EXPECTATIVAS DE REVERSÃO DE TENDÊNCIA. EVITA AS FAMOSAS VIOLINADAS)\n• Target: no primeiro negócio realizado acima (abaixo) da Banda de Bollinger Inferior (Superior), aritmética, de 17 períodos e 0,5 desvios. (PARA DETECTAR QUANDO O PREÇO NÃO ESTÁ MAIS SOBRE-VENDIDO OU SOBRE-COMPRADO, E APROVEITA O POTENCIAL DE VOLATILIDADE DO ATIVO, IDENTIFICANDO SAÍDAS ÓTIMAS).\n\nTAMANHO DA POSIÇÃO\n\nVisando uma perda aceitável de no máximo 6% ao mês, e dado que este setup ocorre entre uma e duas vezes ao ano, podemos admitir uma perda de até 30% do capital, para entrar com todo o capital na operação, sem alavancagem.\nSe o trader for aplicar este setup em vários ativos, pode entrar com posições menores, afim de respeitar a regra dos 6%, aumentando muito a rentabilidade.','buy,target,stoploss','#574BFF,#574BFF,histograma,0,buy_|#B5E433,#B5E433,histograma,0,gain_|#FE0101,#FE0101,histograma,0,stoploss|undefined|undefined|undefined|undefined|undefined|undefined'),
 (84,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n\n    input.put(\"ncandles\",21);\n    input.put(\"deviations\",2.0);\n\n    var lower = script.get(\"result\", script.call(\"$BollingerLower\", lastbar, input));\n\n    var range50percCandle = ((Math.abs(candles.Open(lastbar) - candles.Close(lastbar)) / 100) * 50); //Retorna o valor do preço que representa 50%\n    var range25percHighCandle = ((Math.abs(candles.High(lastbar) - candles.Low(lastbar)) / 100) * 50); //Retorna o valor do preço que representa 50%\n\n    if (candles.Close(lastbar) < candles.Open(lastbar)) {\n        criterio1 = (candles.Close(lastbar) + range50percCandle) < lower;\n    } else {\n        criterio1 = (candles.Open(lastbar) + range50percCandle) < lower;\n    }\n    var criterio2 = candles.Close(lastbar) > candles.High(lastbar) - range25percHighCandle;\n\n    var result = 0;\n    if (criterio1 && criterio2) {\n        result = 1;\n    }\n    json.put(\"result\", result);\n    return json;\n}\n','@Jumper_Buy',' DESCRIÇÃO DO SETUP\n\n• Setup contra a tendência, tanto para compra como para venda (long ou short);\n• Utiliza apenas gráficos diários;\n• Atua na tentativa de identificar região sobre-comprada (sobre-vendida), força atuante no mercado (compradores ou vendedores), um sinal claro de mudança da tendência, além de aproveitar-se também da propriedade de retorno a média vigente nas variações de preços. Traça targets (alvos) de acordo com a volatilidade do ativo no momento;\n• Simples de se identificar visualmente, não é preciso mais do que 10 minutos diários para acompanhar mais de 30 ativos;\n• Estratégia rara. Ocorre de uma a duas vezes por ativo por ano. É uma estratégia complementar, utilizada em combinação com alguma outra que seja freqüente. Pode ser aplicado em qualquer ativo, com eficiência parecida;\n• Serão apresentados somente os resultados das operações Long;\n\nENTRADA\n\nLong (Short): os seguintes critérios devem ser satisfeitos, simultaneamente:\nA. Pelo menos 50% do candle abaixo (acima) da Banda de Bollinger Inferior (Superior), aritmética, com 20 períodos e 2 desvios; (PARA DETECTAR MERCADO SOBRE-VENDIDO OU SOBRE-COMPRADO)\nB. O Fechamento a, no máximo (mínimo), 25% (75%) da máxima do dia; (PARA DETECTAR FORÇA ATUANTE E SINAL CLARO DE REVERSÃO DA TENDÊNCIA)\nEntrada sempre nos fechamentos;\nNão entrar se o objetivo for menor que 3%;\n\nSAÍDA\n\n• Stop loss: abaixo (acima) da mínima (máxima) do candle que gerou a entrada, ou abaixo (acima) da mínima (máxima) do fundo (topo) imeditato a que o candle que gerou a entrada pertence. (GARANTIA DE CONTINUAÇÃO DO MOVIMENTO E FALHA NAS EXPECTATIVAS DE REVERSÃO DE TENDÊNCIA. EVITA AS FAMOSAS VIOLINADAS)\n• Target: no primeiro negócio realizado acima (abaixo) da Banda de Bollinger Inferior (Superior), aritmética, de 17 períodos e 0,5 desvios. (PARA DETECTAR QUANDO O PREÇO NÃO ESTÁ MAIS SOBRE-VENDIDO OU SOBRE-COMPRADO, E APROVEITA O POTENCIAL DE VOLATILIDADE DO ATIVO, IDENTIFICANDO SAÍDAS ÓTIMAS).\n\nTAMANHO DA POSIÇÃO\n\nVisando uma perda aceitável de no máximo 6% ao mês, e dado que este setup ocorre entre uma e duas vezes ao ano, podemos admitir uma perda de até 30% do capital, para entrar com todo o capital na operação, sem alavancagem.\nSe o trader for aplicar este setup em vários ativos, pode entrar com posições menores, afim de respeitar a regra dos 6%, aumentando muito a rentabilidade.','result','#574BFF,#574BFF,histograma,0,buy|#FE0101,#FE0101,histograma,0,stoploss|undefined|undefined'),
 (85,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n\n    input.put(\"ncandles\",17);\n    input.put(\"deviations\",0.5);\n\n    var lower = script.get(\"result\", script.call(\"$BollingerLower\", lastbar, input));\n\n    var criterio1 = (candles.Close(lastbar) > lower);\n\n    var target = 0;\n    if (criterio1) {\n        target = 1;\n    }\n    json.put(\"result\", target);\n    return json;\n}\n','@Jumper_Target',' DESCRIÇÃO DO SETUP\n\n• Setup contra a tendência, tanto para compra como para venda (long ou short);\n• Utiliza apenas gráficos diários;\n• Atua na tentativa de identificar região sobre-comprada (sobre-vendida), força atuante no mercado (compradores ou vendedores), um sinal claro de mudança da tendência, além de aproveitar-se também da propriedade de retorno a média vigente nas variações de preços. Traça targets (alvos) de acordo com a volatilidade do ativo no momento;\n• Simples de se identificar visualmente, não é preciso mais do que 10 minutos diários para acompanhar mais de 30 ativos;\n• Estratégia rara. Ocorre de uma a duas vezes por ativo por ano. É uma estratégia complementar, utilizada em combinação com alguma outra que seja freqüente. Pode ser aplicado em qualquer ativo, com eficiência parecida;\n• Serão apresentados somente os resultados das operações Long;\n\nENTRADA\n\nLong (Short): os seguintes critérios devem ser satisfeitos, simultaneamente:\nA. Pelo menos 50% do candle abaixo (acima) da Banda de Bollinger Inferior (Superior), aritmética, com 20 períodos e 2 desvios; (PARA DETECTAR MERCADO SOBRE-VENDIDO OU SOBRE-COMPRADO)\nB. O Fechamento a, no máximo (mínimo), 25% (75%) da máxima do dia; (PARA DETECTAR FORÇA ATUANTE E SINAL CLARO DE REVERSÃO DA TENDÊNCIA)\nEntrada sempre nos fechamentos;\nNão entrar se o objetivo for menor que 3%;\n\nSAÍDA\n\n• Stop loss: abaixo (acima) da mínima (máxima) do candle que gerou a entrada, ou abaixo (acima) da mínima (máxima) do fundo (topo) imeditato a que o candle que gerou a entrada pertence. (GARANTIA DE CONTINUAÇÃO DO MOVIMENTO E FALHA NAS EXPECTATIVAS DE REVERSÃO DE TENDÊNCIA. EVITA AS FAMOSAS VIOLINADAS)\n• Target: no primeiro negócio realizado acima (abaixo) da Banda de Bollinger Inferior (Superior), aritmética, de 17 períodos e 0,5 desvios. (PARA DETECTAR QUANDO O PREÇO NÃO ESTÁ MAIS SOBRE-VENDIDO OU SOBRE-COMPRADO, E APROVEITA O POTENCIAL DE VOLATILIDADE DO ATIVO, IDENTIFICANDO SAÍDAS ÓTIMAS).\n\nTAMANHO DA POSIÇÃO\n\nVisando uma perda aceitável de no máximo 6% ao mês, e dado que este setup ocorre entre uma e duas vezes ao ano, podemos admitir uma perda de até 30% do capital, para entrar com todo o capital na operação, sem alavancagem.\nSe o trader for aplicar este setup em vários ativos, pode entrar com posições menores, afim de respeitar a regra dos 6%, aumentando muito a rentabilidade.','result','#574BFF,#574BFF,histograma,0,buy|#FE0101,#FE0101,histograma,0,stoploss|undefined|undefined'),
 (86,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n    var jumper_buy = 0;\n    var bar = 0;\n\n    for (bar = lastbar; bar < lastbar + 40; bar++) {\n        jumper_buy = script.get(\"result\", script.call(\"@Jumper_Buy\", bar, input));\n        if (jumper_buy > 0) break;\n    }\n    if (jumper_buy > 0) {\n        var criterio1 = candles.Close(lastbar) < candles.Low(bar);\n\n        var stoploss = 0;\n        if (criterio1) {\n            stoploss = 1;\n        }\n        json.put(\"result\", stoploss);\n    } else {\n        json.put(\"result\", 0);\n    }\n    return json;\n}\n','@Jumper_StopLoss',' DESCRIÇÃO DO SETUP\n\n• Setup contra a tendência, tanto para compra como para venda (long ou short);\n• Utiliza apenas gráficos diários;\n• Atua na tentativa de identificar região sobre-comprada (sobre-vendida), força atuante no mercado (compradores ou vendedores), um sinal claro de mudança da tendência, além de aproveitar-se também da propriedade de retorno a média vigente nas variações de preços. Traça targets (alvos) de acordo com a volatilidade do ativo no momento;\n• Simples de se identificar visualmente, não é preciso mais do que 10 minutos diários para acompanhar mais de 30 ativos;\n• Estratégia rara. Ocorre de uma a duas vezes por ativo por ano. É uma estratégia complementar, utilizada em combinação com alguma outra que seja freqüente. Pode ser aplicado em qualquer ativo, com eficiência parecida;\n• Serão apresentados somente os resultados das operações Long;\n\nENTRADA\n\nLong (Short): os seguintes critérios devem ser satisfeitos, simultaneamente:\nA. Pelo menos 50% do candle abaixo (acima) da Banda de Bollinger Inferior (Superior), aritmética, com 20 períodos e 2 desvios; (PARA DETECTAR MERCADO SOBRE-VENDIDO OU SOBRE-COMPRADO)\nB. O Fechamento a, no máximo (mínimo), 25% (75%) da máxima do dia; (PARA DETECTAR FORÇA ATUANTE E SINAL CLARO DE REVERSÃO DA TENDÊNCIA)\nEntrada sempre nos fechamentos;\nNão entrar se o objetivo for menor que 3%;\n\nSAÍDA\n\n• Stop loss: abaixo (acima) da mínima (máxima) do candle que gerou a entrada, ou abaixo (acima) da mínima (máxima) do fundo (topo) imeditato a que o candle que gerou a entrada pertence. (GARANTIA DE CONTINUAÇÃO DO MOVIMENTO E FALHA NAS EXPECTATIVAS DE REVERSÃO DE TENDÊNCIA. EVITA AS FAMOSAS VIOLINADAS)\n• Target: no primeiro negócio realizado acima (abaixo) da Banda de Bollinger Inferior (Superior), aritmética, de 17 períodos e 0,5 desvios. (PARA DETECTAR QUANDO O PREÇO NÃO ESTÁ MAIS SOBRE-VENDIDO OU SOBRE-COMPRADO, E APROVEITA O POTENCIAL DE VOLATILIDADE DO ATIVO, IDENTIFICANDO SAÍDAS ÓTIMAS).\n\nTAMANHO DA POSIÇÃO\n\nVisando uma perda aceitável de no máximo 6% ao mês, e dado que este setup ocorre entre uma e duas vezes ao ano, podemos admitir uma perda de até 30% do capital, para entrar com todo o capital na operação, sem alavancagem.\nSe o trader for aplicar este setup em vários ativos, pode entrar com posições menores, afim de respeitar a regra dos 6%, aumentando muito a rentabilidade.','result','#574BFF,#574BFF,histograma,0,buy|#FE0101,#FE0101,histograma,0,stoploss|undefined|undefined'),
 (88,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n    input.put(\"ncandles\", 52);\n    var MML = script.get(\"result\", script.call(\"$MMS\", lastbar, input));\n    input.put(\"ncandles\", 24);\n    var MMC = script.get(\"result\", script.call(\"$MMS\", lastbar, input));\n\n    var buy = 0;\n    var stopgain = 0;\n    var stoploss = 0;\n\n    if ((MMC - MML) > 0) {\n        buy = candles.Close(lastbar);\n    }\n\n    var bar = 0;\n    for (bar = lastbar; bar < lastbar + 30; bar++) {\n        var result = script.get(\"result\", script.call(\"@FORSFUNDS_Buy\", lastbar, input));\n        if (result > 0) break;\n    }\n    if (result > 0) {\n\n        var criterio4 = ((Math.abs(MML - candles.Close(bar)) <= 0.03) || (Math.abs(MMC - candles.Close(bar)) <= 0.03));\n        if (criterio4) {\n            stopgain = candles.Close(lastbar);\n        }\n\n        if (candles.Close(lastbar) < (candles.Close(bar) / 1.018)) {\n            stoploss = candles.Close(bar) / 1.018;\n        }\n\n        var criterio0 = (((bar - lastbar) == 1) && (candles.High(lastbar + 1) < candles.Open(lastbar))); //Se passou 1 dia da operaçao de compra e teve um GAP no dia seguinte\n        var criterio1 = ((bar - lastbar) > 4); //Se passou 4 dias da operaçao de compra\n        var criterio2 = (candles.Low(lastbar + 2) > candles.Close(bar));\n        var criterio3 = (candles.Low(lastbar + 1) > candles.Close(bar));\n\n        if (criterio1 && criterio2 && criterio3) {\n            stoploss = candles.Close(bar) / 1.01;\n        }\n        if (criterio0) {\n            stoploss = candles.Close(bar) / 1.01;\n        }\n    }\n\n    json.put(\"long\", buy);\n    json.put(\"stopgain\", stopgain);\n    json.put(\"stoploss\", stoploss);\n\n    return json;\n}\n','@FORS_FUNDS','DESCRIÇÃO DO SETUP \n\nUtiliza-se da diferença entre médias aritméticas curtas e longas e da variação das mesmas para definir entradas e saídas. MC = 24 / ML = 52\nENTRADA\n\nLong: Se (MC-ML) > 0, entrada no preço de fechamento para a data;\nSAÍDA\n\nStop gain: Se variação da ML ou MC <= R$0,03, venda no fechamento;\nStop loss: -1.8% do preço de entrada. Stop sobe para o preço de compra – 0,1%, se e somente se a mínima de dois dias anteriores for maior que o preço de compra, após o quarto dia dentro da operação. Se GAP, 0,1% abaixo do preço de entrada. \nTAMANHO DA POSIÇÃO\n\n1.8% em risco, no máximo.','long,stopgain,stoploss','#574BFF,#574BFF,histograma,0,long|#B5E433,#B5E433,histograma,0,stopgain|#FE0101,#FE0101,histograma,0,stoploss'),
 (89,'function applyScript(candles, json, position, script, input) {\n\n    var lastbar = parseInt(position);\n\n    input.put(\"ncandles\", 52);\n    var MML = script.get(\"result\", script.call(\"$MMS\", lastbar, input));\n    input.put(\"ncandles\", 24);\n    var MMC = script.get(\"result\", script.call(\"$MMS\", lastbar, input));\n\n    var buy = 0;\n\n    if ((MMC - MML) > 0) {\n        buy = candles.Close(lastbar);\n    }\n\n    json.put(\"result\", buy);\n\n    return json;\n}\n','@FORSFUNDS_Buy','DESCRIÇÃO DO SETUP \n\nUtiliza-se da diferença entre médias aritméticas curtas e longas e da variação das mesmas para definir entradas e saídas. MC = 24 / ML = 52\nENTRADA\n\nLong: Se (MC-ML) > 0, entrada no preço de fechamento para a data;\nSAÍDA\n\nStop gain: Se variação da ML ou MC <= R$0,03, venda no fechamento;\n\nStop loss: -1.8% do preço de entrada. Stop sobe para o preço de compra – 0,1%, se e somente se a mínima de dois dias anteriores for maior que o preço de compra, após o quarto dia dentro da operação. Se GAP, 0,1% abaixo do preço de entrada. \nTAMANHO DA POSIÇÃO\n\n1.8% em risco, no máximo.','result','#574BFF,#574BFF,histograma,0,buy|#B5E433,#B5E433,histograma,0,target|#FE0101,#FE0101,histograma,0,stoploss|undefined|undefined'),
 (90,'function applyScript(candles, json, position, script, input) {\n    var lastbar = parseInt(position);\n\n    var rs = script.call(\"@FORS_FUNDS\", lastbar, input);\n    \n    json.put(\"buy_\", script.get(\"long\",rs));\n    json.put(\"gain_\", script.get(\"stopgain\",rs));\n    json.put(\"loss_\", script.get(\"stoploss\",rs));\n\n    return json;\n}\n','script 05',' DESCRIÇÃO DO SETUP\n\n• Setup contra a tendência, tanto para compra como para venda (long ou short);\n• Utiliza apenas gráficos diários;\n• Atua na tentativa de identificar região sobre-comprada (sobre-vendida), força atuante no mercado (compradores ou vendedores), um sinal claro de mudança da tendência, além de aproveitar-se também da propriedade de retorno a média vigente nas variações de preços. Traça targets (alvos) de acordo com a volatilidade do ativo no momento;\n• Simples de se identificar visualmente, não é preciso mais do que 10 minutos diários para acompanhar mais de 30 ativos;\n• Estratégia rara. Ocorre de uma a duas vezes por ativo por ano. É uma estratégia complementar, utilizada em combinação com alguma outra que seja freqüente. Pode ser aplicado em qualquer ativo, com eficiência parecida;\n• Serão apresentados somente os resultados das operações Long;\n\nENTRADA\n\nLong (Short): os seguintes critérios devem ser satisfeitos, simultaneamente:\nA. Pelo menos 50% do candle abaixo (acima) da Banda de Bollinger Inferior (Superior), aritmética, com 20 períodos e 2 desvios; (PARA DETECTAR MERCADO SOBRE-VENDIDO OU SOBRE-COMPRADO)\nB. O Fechamento a, no máximo (mínimo), 25% (75%) da máxima do dia; (PARA DETECTAR FORÇA ATUANTE E SINAL CLARO DE REVERSÃO DA TENDÊNCIA)\nEntrada sempre nos fechamentos;\nNão entrar se o objetivo for menor que 3%;\n\nSAÍDA\n\n• Stop loss: abaixo (acima) da mínima (máxima) do candle que gerou a entrada, ou abaixo (acima) da mínima (máxima) do fundo (topo) imeditato a que o candle que gerou a entrada pertence. (GARANTIA DE CONTINUAÇÃO DO MOVIMENTO E FALHA NAS EXPECTATIVAS DE REVERSÃO DE TENDÊNCIA. EVITA AS FAMOSAS VIOLINADAS)\n• Target: no primeiro negócio realizado acima (abaixo) da Banda de Bollinger Inferior (Superior), aritmética, de 17 períodos e 0,5 desvios. (PARA DETECTAR QUANDO O PREÇO NÃO ESTÁ MAIS SOBRE-VENDIDO OU SOBRE-COMPRADO, E APROVEITA O POTENCIAL DE VOLATILIDADE DO ATIVO, IDENTIFICANDO SAÍDAS ÓTIMAS).\n\nTAMANHO DA POSIÇÃO\n\nVisando uma perda aceitável de no máximo 6% ao mês, e dado que este setup ocorre entre uma e duas vezes ao ano, podemos admitir uma perda de até 30% do capital, para entrar com todo o capital na operação, sem alavancagem.\nSe o trader for aplicar este setup em vários ativos, pode entrar com posições menores, afim de respeitar a regra dos 6%, aumentando muito a rentabilidade.','buy_,gain_,loss_','#574BFF,#574BFF,histograma,0,buy_|#B5E433,#B5E433,histograma,0,gain_|#FE0101,#FE0101,histograma,0,stoploss|undefined|undefined|undefined|undefined|undefined|undefined'),
 (91,'function applyScript(candles, json, lastbar, script, input) {\n\nvar maxH = (candles.High(lastbar) > candles.High(lastbar+1)) ? candles.High(lastbar) : candles.High(lastbar+1);\nvar minL = (candles.Low(lastbar) < candles.Low(lastbar+1)) ? candles.Low(lastbar) : candles.Low(lastbar+1);\n\nvar position = lastbar+1;\nvar HHV = 0;\nfor(var x=position; x<position+25; x++){\n   if(HHV < candles.Close(x))\n      HHV = candles.Close(x);\n}\n\nvar colA = (maxH-minL)/(minL*100);\nvar colB = candles.Close(lastbar) > HHV;\n\ninput.put(\"ncandles\",\"40\");\nvar MME = script.get(\"result\",script.call(\"$MME\",lastbar,input));\n\nvar result = (colB && (candles.Volume(position) > 200000) && (candles.Close(position) > MME) && (colA <= 15));\n// && (colA <= 15)\n    json.put(\"result\", (result)?1:0);\n    return json;\n}\n','@Peak_Trough','Peak & Trough Breakout\n------------------------\nhttp://www.scribd.com/doc/6479008/Metastock-Breakout-Formulas','result','#ED2E2E,#ED2E2E,histograma,0,result|#ED2E2E,#ED2E2E,histograma,0,close'),
 (92,'function applyScript(candles, json, lastbar, script, input) {\n\n    var HHV = 0;\n    for (var x = lastbar; x < lastbar + 25; x++) {\n        if (HHV < candles.Close(x)) HHV = candles.Close(x);\n    }\n\n    var HHV_1 = 0;\n    for (var x = lastbar + 1; x < (lastbar + 1) + 25; x++) {\n        if (HHV < candles.Close(x)) {\n            HHV = candles.Close(x);\n        }\n    }\n\n    var LLV = 0;\n    for (var x = lastbar; x < lastbar + 25; x++) {\n        if (LLV > candles.Low(x)) {\n            LLV = candles.Low(x);\n        }\n    }\n    input.put(\"ncandles\", \"180\");\n    var MME = script.get(\"result\", script.call(\"$MME\", lastbar, input));\n\n    var colA = (HHV - LLV) / (LLV * 100);\n    var colB = (candles.Close(lastbar) > HHV_1);\n    var result = (colB && (candles.Volume(lastbar) > 200000) && (candles.Close(lastbar) > MME) && colA <= 15);\n    json.put(\"result\", (result) ? 1 : 0);\n    json.put(\"HHB\", (result) ? 1 : 0);\n    return json;\n}\n','@Highest_High_Breakout','Highest High Value Breakout\n------------------------\nhttp://www.scribd.com/doc/6479008/Metastock-Breakout-Formulas','HHB','#ED2E2E,#ED2E2E,histograma,0,HHB2|#ED2E2E,#ED2E2E,histograma,0,close'),
 (93,'function applyScript(candles, json, lastbar, script, input) {\n\n    var colA = HHV(candles,lastbar,3)<=(1.2*HHV(candles,lastbar,24)) && LLV(candles,lastbar,3)>=0.8*LLV(candles,lastbar,24);\n    var colB = HHV(candles,lastbar,6)<=1.2*HHV(candles,lastbar,24) && LLV(candles,lastbar,6)>=0.8*LLV(candles,lastbar,24);\n    var colC = HHV(candles,lastbar,12)<=1.2*HHV(candles,lastbar,24) && LLV(candles,lastbar,12)>=0.8*LLV(candles,lastbar,24);\n    var colD = HHV(candles,lastbar,15)<=1.2*HHV(candles,lastbar,24) && LLV(candles,lastbar,15)>=0.8*LLV(candles,lastbar,24);\n    var colE = HHV(candles,lastbar,18)<=1.2*HHV(candles,lastbar,24) && LLV(candles,lastbar,18)>=0.8*LLV(candles,lastbar,24);\n    var colF = HHV(candles,lastbar,21)<=1.2*HHV(candles,lastbar,24) && LLV(candles,lastbar,21)>=0.8*LLV(candles,lastbar,24);\n\n    var result = colA && colB && colC && colD && colE && colF && (candles.Close(lastbar)>HHV(candles,lastbar,24));\n    json.put(\"HHB2\", (result) ? 1 : 0);\n    return json;\n}\n\nfunction LLV(candles, lastbar, ncandles) {\n    var LLV = 0;\n    for (var x = lastbar; x < lastbar + ncandles; x++) {\n        if (LLV > candles.Low(x)) {\n            LLV = candles.Low(x);\n        }\n    }\n    return LLV;\n}\n\nfunction HHV(candles, lastbar, ncandles) {\n    var HHV = 0;\n    for (var x = lastbar; x < lastbar + ncandles; x++) {\n        if (HHV < candles.Close(x)) {\n            HHV = candles.Close(x);\n        }\n    }\n    return HHV;\n}\n','@Highest_High_Breakout2','Highest High Value Breakout\n------------------------\nhttp://www.scribd.com/doc/6479008/Metastock-Breakout-Formulas','HHB2','#ED2E2E,#ED2E2E,histograma,0,HHB2|#ED2E2E,#ED2E2E,histograma,0,close');
/*!40000 ALTER TABLE `scripts` ENABLE KEYS */;




/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
